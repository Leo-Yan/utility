!function(){"use strict";function n(n){g.push(n),1===g.length&&u()}function e(){for(;g.length;)g[0](),g.shift()}function t(n){this.a=h,this.b=void 0,this.f=[];var e=this;try{n(function(n){a(e,n)},function(n){l(e,n)})}catch(t){l(e,t)}}function i(n){return new t(function(e,t){t(n)})}function o(n){return new t(function(e){e(n)})}function a(n,e){if(n.a===h){if(e===n)throw new TypeError("Promise settled with itself.");var t=!1;try{var i=e&&e.then;if(null!==e&&"object"==typeof e&&"function"==typeof i)return void i.call(e,function(e){t||a(n,e),t=!0},function(e){t||l(n,e),t=!0})}catch(o){return void(t||l(n,o))}n.a=0,n.b=e,r(n)}}function l(n,e){if(n.a===h){if(e===n)throw new TypeError("Promise settled with itself.");n.a=1,n.b=e,r(n)}}function r(e){n(function(){if(e.a!==h)for(;e.f.length;){var n=e.f.shift(),t=n[0],i=n[1],o=n[2],n=n[3];try{0===e.a?o("function"==typeof t?t.call(void 0,e.b):e.b):1===e.a&&("function"==typeof i?o(i.call(void 0,e.b)):n(e.b))}catch(a){n(a)}}})}function d(n){return new t(function(e,t){function i(t){return function(i){l[t]=i,a+=1,a===n.length&&e(l)}}var a=0,l=[];0===n.length&&e(l);for(var r=0;r<n.length;r+=1)o(n[r]).c(i(r),t)})}function s(n){return new t(function(e,t){for(var i=0;i<n.length;i+=1)o(n[i]).c(e,t)})}var g=[];if(window.MutationObserver){var c=document.createElement("div");new MutationObserver(e).observe(c,{attributes:!0});var u=function(){c.setAttribute("x",0)}}else u=function(){setTimeout(e)};var h=2;t.prototype.g=function(n){return this.c(void 0,n)},t.prototype.c=function(n,e){var i=this;return new t(function(t,o){i.f.push([n,e,t,o]),r(i)})},window.Promise||(window.Promise=t,window.Promise.resolve=o,window.Promise.reject=i,window.Promise.race=s,window.Promise.all=d,window.Promise.prototype.then=t.prototype.c,window.Promise.prototype["catch"]=t.prototype.g)}(),function adClosure(){function setupEventsAPI(){var n="e49b2b1c66daf2a0853dd56acd625cde",e="window.RegisterHymnalAd"+n,t="Ly8gVGhpcyBmaWxlIGlzIGluc2VydGVkIGlubGluZSBhbmQgdGhlbiAudG9TdHJpbmcoKSBpcyBjYWxsZWQgb24gaXQKLy8gYW5kIG9ubHkgaWYgd2UgbmVlZCB0byBsaXN0ZW4gdG8gdGhpbmdzIG91dHNpZGUgb2YgYW4gaWZyYW1lCi8vIGRvIHdlIGV2YWwgYW5kIGluc3RhbnRpYXRlIHRoZSBjb2RlCgooZnVuY3Rpb24od2luZG93KSB7CiAgInVzZSBzdHJpY3QiOwogIHZhciBIeW1uYWxQYXJlbnQgPSB7CiAgICBhZHM6IHt9LAogICAgbGlzdGVuaW5nRm9yTWVzc2FnZXM6IGZhbHNlLAogICAgZ2xvYmFsRGF0YToge30sCiAgICBxdWV1ZVJ1bm5pbmc6IGZhbHNlLAogICAgY2FuY2VsV2F0Y2g6IGZhbHNlLCAvLyBJZiB0aGlzIGlzIHRydWUgdGhlIHNldFRpbWVvdXQgd2lsbCBzdG9wCiAgICB0aHJvdHRsZUludDogMTAwLAogICAgdHVyYm9JbnQ6IDE2LAogICAgLy8gQnkgdG9nZ2xpbmcgYm9vbGVhbnMgd2UgY2FuIGFzc3VyZSB0aGF0IG91ciBldmVudCBoYW5kbGVycwogICAgLy8gZG9uJ3QgYmxvY2sgdGhlIG1haW4gcmVuZGVyIHRocmVhZCBpbiB0aGUgYnJvd3NlcgogICAgLy8gdGh1cyBtYWtpbmcgb3VyIGFkIHZpZXdlcnMgYSBsaXR0bGUgYml0IGhhcHBpZXIKICAgIGV2OiB7CiAgICAgIHNjcm9sbDogZmFsc2UsCiAgICAgIHJlc2l6ZTogZmFsc2UKICAgIH0sCiAgICAvLyBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBidWlsZCBhIG5ldyBhZCBvYmplY3QsIGNhbGxlZCBieSBJbml0CiAgICBjaGlsZEFkOiBmdW5jdGlvbihvcHRzKSB7CiAgICAgcmV0dXJuIHsKICAgICAgc2VjdXJlVG9rZW46IG9wdHMudG9rZW4sCiAgICAgIG1lc3NhZ2VUYXJnZXQ6IG51bGwsCiAgICAgIGlzQ29ubmVjdGVkOiBmYWxzZSwKICAgICAgaWZyYW1lZDogb3B0cy5pbklmcmFtZSwKICAgICAgY29udGFpbmVyRWw6IG51bGwsCiAgICAgIGRhdGE6IHt9LAogICAgICB0dXJib09uOiBmYWxzZSwKICAgICAgb3JpZ2luOiBudWxsCiAgICAgfTsKICAgIH0sCgogICAgLy8gVGhpcyBmdW5jdGlvbiBpcyB0aGUgb25seSBmdW5jdGlvbiBleHBvc2VkIHB1YmxpY2x5CiAgICAvLyBPcHRzIGlzIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgdG9rZW4gKGFkSWQtcmFuZG9tTnVtYmVyKSBhbmQKICAgIC8vIGEgaW5JZnJhbWUgYm9vbGVhbi4KICAgIC8vIENhbGxpbmcgdGhpcyB3aWxsIHJlZ2lzdGVyIGFuIGFkIHRvIHJlY2VpdmUgbWVzc2FnZXMgYXMgdGhpcyBsaWIgZGlzcGF0Y2hlcyB0aGVtCiAgICBpbml0OiBmdW5jdGlvbihvcHRzKSB7CiAgICAgIC8vIHdlJ2xsIHVzZSB0aGUgdG9rZW4gYXMgdGhlIGtleQogICAgICAvLyBzaW5jZSBldmVyeSBtZXNzYWdlIGZyb20gdGhlIGNoaWxkIHdpbGwgaW5jbHVkZSB0aGUgdG9rZW4KICAgICAgdGhpcy5hZHNbb3B0cy50b2tlbl0gPSB0aGlzLmNoaWxkQWQob3B0cyk7CgogICAgICBpZiAoIXRoaXMubGlzdGVuaW5nRm9yTWVzc2FnZXMpIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMubWVzc2FnZUhhbmRsZXIuYmluZCh0aGlzKSk7CiAgICAgICAgdGhpcy5saXN0ZW5pbmdGb3JNZXNzYWdlcyA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gaWZyYW1lIHRoZSBwYXJlbnQgY2FuIGluaXRpYXRlIHRoZSBtZXNzYWdlcwogICAgICAvLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBtZXNzYWdlIGZyb20gdGhlIGZyYW1lIHRvIGdldCB0aGUgdGFyZ2V0CiAgICAgIGlmICghb3B0cy5pbklmcmFtZSkgewogICAgICAgIHZhciBpZCA9IG9wdHMudG9rZW4uc3BsaXQoJ18nKVswXTsKICAgICAgICB0aGlzLmFkc1tvcHRzLnRva2VuXS5jb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWh5bW5hbC1pZD0iJyArIGlkICsgJyJdJyk7CiAgICAgICAgaWYgKHRoaXMuYWRzW29wdHMudG9rZW5dLmNvbnRhaW5lckVsKSB7CiAgICAgICAgICB0aGlzLmFkc1tvcHRzLnRva2VuXS5tZXNzYWdlVGFyZ2V0ID0gdGhpcy53aW5kb3dMb2NhdGlvbigpOzsKICAgICAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dLmlzQ29ubmVjdGVkID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZGVmYXVsdFBhcmFtcyhvcHRzLnRva2VuKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hZHNbb3B0cy50b2tlbl0uY29udGFpbmVyRWwgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5xdWV1ZVJ1bm5pbmcpIHsKICAgICAgICB0aGlzLmNyZWF0ZVF1ZXVlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgYWREaW1lbnNpb25zOiBmdW5jdGlvbigpIHsKCiAgICAgIHZhciBlbGVtZW50VG9NZWFzdXJlOwoKICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWxlbWVudCkgewogICAgICAgIGVsZW1lbnRUb01lYXN1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuY29udGFpbmVyRWxlbWVudClbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWxlbWVudFRvTWVhc3VyZSA9IHRoaXMuZnJhbWVUYXJnZXQuZnJhbWVFbGVtZW50CiAgICAgIH0KCiAgICAgIC8vIExldHMgbWFrZSBzdXJlIHdlIGNhbiByZWFsbHkgY2FsbCB0aGlzIGhlcmUKICAgICAgaWYoZWxlbWVudFRvTWVhc3VyZSAmJiB0eXBlb2YgZWxlbWVudFRvTWVhc3VyZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPT09ICdmdW5jdGlvbicpewogICAgICAgIHJldHVybiBlbGVtZW50VG9NZWFzdXJlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB7IGhlaWdodDogMCwgd2lkdGg6IDAsIHRvcDowIH07CiAgICAgIH0KICAgIH0sCgogICAgY2hlY2tGb3JDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIXRoaXMudmlzT2JzZXJ2ZXIpIHsKICAgICAgICB0aGlzLnZpc09ic2VydmVyID0gdGhpcy5vYnNlcnZlUGFnZVZpc2liaWxpdHkoKTsKICAgICAgfQoKICAgICAgdGhpcy53YXRjaGVyID0gZmFsc2U7CiAgICAgIHZhciBoYW5kbGVyID0gJyc7CiAgICAgIGZvciAodmFyIGV2VHlwZSBpbiB0aGlzLmV2KSB7CiAgICAgICAgaWYgKHRoaXMuZXYuaGFzT3duUHJvcGVydHkoZXZUeXBlKSAmJiB0aGlzLmV2W2V2VHlwZV0pIHsKICAgICAgICAgIC8vIEhhbmRsZXIgZnVuY3Rpb25zIGFyZSAnb25zY3JvbGwnIG9yICdvbnJlc2l6ZScKICAgICAgICAgIGhhbmRsZXIgPSAnb24nICsgZXZUeXBlOwogICAgICAgICAgdGhpc1toYW5kbGVyXSgpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuY2FuY2VsV2F0Y2gpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy53YXRjaGVyKTsKICAgICAgICB0aGlzLndhdGNoZXIgPSB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50aHJvdHRsZWRXYXRjaGVyKHRoaXMuY2hlY2tGb3JDaGFuZ2UsIHRoaXMudGhyb3R0bGVJbnQpOwogICAgICB9CiAgICB9LAoKICAgIGNyZWF0ZVF1ZXVlOiBmdW5jdGlvbigpIHsKICAgICAgZm9yICh2YXIgZXZudCBpbiB0aGlzLmV2KSB7CiAgICAgICAgaWYgKHRoaXMuZXYuaGFzT3duUHJvcGVydHkoZXZudCkpIHsKICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2bnQsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnRocm90dGxlZFdhdGNoZXIodGhpcy5jaGVja0ZvckNoYW5nZSwgdGhpcy50aHJvdHRsZUludCk7CiAgICAgIHRoaXMucXVldWVSdW5uaW5nID0gdHJ1ZTsKICAgIH0sCgogICAgY3VycmVudERhdGE6IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgZGF0YSA9IHRoaXMuYWRzW2tleV0uZGF0YTsKICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZ2xvYmFsRGF0YSkgewogICAgICAgIGlmICh0aGlzLmdsb2JhbERhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgZGF0YVtrZXldID0gdGhpcy5nbG9iYWxEYXRhW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBkYXRhOwogICAgfSwKCiAgICBkZWZhdWx0UGFyYW1zOiBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGQgPSB0aGlzLmFkc1trZXldLmRhdGE7CiAgICAgIHZhciBnID0gdGhpcy5nbG9iYWxEYXRhOwogICAgICAvLyBHbG9iYWwgcHJvcGVydGllcyBhcmUgc2V0dXAgb25jZSBhbmQgdGhlbiB1cGRhdGVkIG9uIHNjcm9sbC9yZXNpemUKICAgICAgaWYgKCFnLndpbmRvd1dpZHRoKSB7CiAgICAgICAgZy53aW5kb3dXaWR0aCA9IHRoaXMuZ2V0V2luZG93V2lkdGgoKTsKICAgICAgfQogICAgICBpZiAoIWcud2luZG93SGVpZ2h0KSB7CiAgICAgICAgZy53aW5kb3dIZWlnaHQgPSB0aGlzLmdldFdpbmRvd0hlaWdodCgpOwogICAgICB9CiAgICAgIGlmICghZy5kb2N1bWVudEhlaWdodCkgewogICAgICAgIGcuZG9jdW1lbnRIZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgfQogICAgICBpZiAoIWcuc2Nyb2xsT2Zmc2V0KSB7CiAgICAgICAgZy5zY3JvbGxPZmZzZXQgPSB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgIH0KCiAgICAgIHZhciBmcmFtZURpbXMgPSB0aGlzLmdldEZyYW1lRGltZW5zaW9ucyhrZXkpOwogICAgICBkLmZyYW1lSGVpZ2h0ID0gZnJhbWVEaW1zLmhlaWdodDsKICAgICAgZC5mcmFtZVdpZHRoID0gZnJhbWVEaW1zLndpZHRoOwogICAgICBkLmZyYW1lVG9wUG9zID0gZnJhbWVEaW1zLnRvcDsKICAgICAgZC5mcmFtZVBvc09uUGFnZSA9IHRoaXMuZ2V0ZnJhbWVQb3NPblBhZ2UoZnJhbWVEaW1zLnRvcCk7CiAgICAgIGQuc2Nyb2xsUGVyY2VudCA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwoKICAgICAgdGhpcy5kaXNwYXRjaENoYW5nZShrZXksICJpbml0aWFsIik7CiAgICAgIHJldHVybiBkOwogICAgfSwKCiAgICBkaXNwYXRjaENoYW5nZTogZnVuY3Rpb24oa2V5LCBldlR5cGUpIHsKICAgICAgdmFyIGRhdGE7CiAgICAgIGlmIChldlR5cGUgJiYgZXZUeXBlID09PSAidHVyYm8iKSB7CiAgICAgICAgZGF0YSA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEgPSB0aGlzLmN1cnJlbnREYXRhKGtleSk7CiAgICAgIH0KCiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgdHlwZTogZXZUeXBlIHx8ICcnLAogICAgICAgIHBhcmFtczogZGF0YSwKICAgICAgICB0b2tlbjogdGhpcy5hZHNba2V5XS5zZWN1cmVUb2tlbiwKICAgICAgICBzZW5kZXI6ICJwYXJlbnQiCiAgICAgIH07CiAgICAgIGlmICh0aGlzLmFkc1trZXldLmlmcmFtZWQgJiYgdGhpcy5hZHNba2V5XS5tZXNzYWdlVGFyZ2V0ICYmIHRoaXMuYWRzW2tleV0ubWVzc2FnZVRhcmdldC5wb3N0TWVzc2FnZSkgewogICAgICAgIHRoaXMuYWRzW2tleV0ubWVzc2FnZVRhcmdldC5wb3N0TWVzc2FnZShwYXJhbXMsIHRoaXMuYWRzW2tleV0ub3JpZ2luKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UocGFyYW1zLCB0aGlzLndpbmRvd0xvY2F0aW9uKCkpOwogICAgICB9CiAgICB9LAoKICAgIHR1cmJvTW9kZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBkID0gdGhpcy5jdXJyZW50RGF0YShrZXkpOwogICAgICB2YXIgZSA9IHRoaXMuZXY7CiAgICAgIHRoaXMuYWRzW2tleV0udHVyYm9PbiA9IHRydWU7CiAgICAgIGlmIChlLnNjcm9sbCB8fCBlLnJlc2l6ZSkgewogICAgICAgIGQuc2Nyb2xsUGVyY2VudCA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwoKICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKGtleSwgInR1cmJvIik7CiAgICAgIH0KICAgICAgdGhpcy50aHJvdHRsZWRXYXRjaGVyKHRoaXMudHVyYm9Nb2RlLCB0aGlzLnR1cmJvSW50LCBrZXkpOwogICAgfSwKCiAgICBldmVudEhhbmRsZXI6IGZ1bmN0aW9uKGV2KSB7CiAgICAgIHRoaXMuZXZbZXYudHlwZV0gPSB0cnVlOwogICAgfSwKCiAgICBnZXRGcmFtZURpbWVuc2lvbnM6IGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAodGhpcy5hZHNba2V5XS5jb250YWluZXJFbCkgewogICAgICAgIHJldHVybiB0aGlzLmFkc1trZXldLmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIElGIHRoZSBjb250YWluZXIgZWwgZG9lc24ndCBleGlzdAogICAgICAgIHJldHVybiAge2hlaWdodDogMCwgd2lkdGg6IDAsIHRvcDogMH0KICAgICAgfQogICAgfSwKCiAgICBnZXRmcmFtZVBvc09uUGFnZTogZnVuY3Rpb24odG9wKSB7CiAgICAgIHJldHVybiBNYXRoLmFicyhkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIHRvcCk7CiAgICB9LAoKICAgIGdldEFkTWlkcG9pbnQ6IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgZnJhbWUgPSB0aGlzLmdldEZyYW1lRGltZW5zaW9ucyhrZXkpOwogICAgICB2YXIgeSA9IHdpbmRvdy5zY3JvbGxZIHx8IHdpbmRvdy5wYWdlWU9mZnNldDsKICAgICAgcmV0dXJuIGZyYW1lLnRvcCArIChmcmFtZS5oZWlnaHQgLyAyKSArIHk7CiAgICB9LAoKICAgIGdldFNjcm9sbFJhbmdlOiBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGZyYW1lID0gdGhpcy5jdXJyZW50RGF0YShrZXkpOwogICAgICB2YXIgbG93ZXIgPSBNYXRoLmZsb29yKGZyYW1lLmZyYW1lUG9zT25QYWdlIC0gd2luZG93LmlubmVySGVpZ2h0KTsKICAgICAgdmFyIHVwcGVyID0gTWF0aC5jZWlsKGZyYW1lLmZyYW1lUG9zT25QYWdlICsgZnJhbWUuZnJhbWVIZWlnaHQpOwogICAgICByZXR1cm4gW2xvd2VyLCB1cHBlcl07CiAgICB9LAoKICAgIC8vIGZvcm11bGEgZnJvbSB0aGUgbWFnbmlmaWNlbnQgc3RhY2tleGNoYW5nZQogICAgLy9odHRwOi8vbWF0aC5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvNTE1MDkvaG93LXRvLWNhbGN1bGF0ZS1wZXJjZW50YWdlLW9mLXZhbHVlLWluc2lkZS1hcmJpdHJhcnktcmFuZ2UKICAgIGdldFNjcm9sbFBlcmNlbnRhZ2U6IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgYm91bmRzID0gdGhpcy5nZXRTY3JvbGxSYW5nZShrZXkpOwogICAgICB2YXIgeSA9IHdpbmRvdy5zY3JvbGxZIHx8IHdpbmRvdy5wYWdlWU9mZnNldDsKCiAgICAgIHZhciBwY3QgPSAoeSAtIGJvdW5kc1swXSkgLyAoYm91bmRzWzFdIC0gYm91bmRzWzBdKTsKICAgICAgcmV0dXJuIHBjdDsKICAgIH0sCgogICAgZ2V0V2luZG93V2lkdGg6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgLy8gdGhpcyBtYXkgYmUgdHJ1ZSBvbiBtb2JpbGUgZGV2aWNlcyB3aXRoIGhpZ2ggRFBJIHNjcmVlbnMKICAgICAgaWYgKHcgPiBzY3JlZW4ud2lkdGgpIHsKICAgICAgICB3ID0gc2NyZWVuLndpZHRoOwogICAgICB9CiAgICAgIHJldHVybiB3OwogICAgfSwKCiAgICBnZXRXaW5kb3dIZWlnaHQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgICBpZiAoaCA+IHNjcmVlbi5oZWlnaHQpIHsKICAgICAgICBoID0gc2NyZWVuLmhlaWdodDsKICAgICAgfQogICAgICByZXR1cm4gaDsKICAgIH0sCgogICAgb2JzZXJ2ZVBhZ2VWaXNpYmlsaXR5OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMudmlzT2JzZXJ2ZXIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIHByZWZpeGVzID0gWydoJywgJ21vekgnLCAnbXNIJywgJ3dlYmtpdEgnXTsKICAgICAgdmFyIGhpZGRlbiwgdmlzaWJpbGl0eUNoYW5nZQogICAgICBwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uKHByZWZpeCkgewogICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnRbcHJlZml4ICsgJ2lkZGVuJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaGlkZGVuID0gcHJlZml4ICsgJ2lkZGVuJzsKICAgICAgICAgIGlmIChwcmVmaXggPT09ICdoJykgewogICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3Zpc2liaWxpdHljaGFuZ2UnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9IHByZWZpeC5zbGljZSgwLCAtMSkgKyAndmlzaWJpbGl0eWNoYW5nZSc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudFtoaWRkZW5dID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih2aXNpYmlsaXR5Q2hhbmdlLCBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLnZpc09ic2VydmVyID0gdHJ1ZTsKICAgICAgICBpZiAoZG9jdW1lbnRbaGlkZGVuXSkgewogICAgICAgICAgdGhpcy5jYW5jZWxXYXRjaCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY2FuY2VsV2F0Y2ggPSBmYWxzZTsKICAgICAgICAgIHRoaXMuY2hlY2tGb3JDaGFuZ2UoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh0aGlzKSkKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAoKICAgIHRocm90dGxlZFdhdGNoZXI6IGZ1bmN0aW9uKGNiLCBpbnQsIGtleSkgewogICAgICBzZXRUaW1lb3V0KGNiLmJpbmQodGhpcyksIGludCwga2V5KTsKICAgIH0sCgogICAgbWVzc2FnZUhhbmRsZXI6IGZ1bmN0aW9uKGV2KSB7CiAgICAgIHZhciBpc0NoaWxkID0gZXYuZGF0YS5zZW5kZXIgJiYgZXYuZGF0YS5zZW5kZXIgPT09ICJjaGlsZCI7CiAgICAgIHZhciBhZCA9IGV2LmRhdGEudG9rZW4gJiYgdGhpcy5hZHNbZXYuZGF0YS50b2tlbl07CiAgICAgIGlmICghaXNDaGlsZCB8fCAhYWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgYWQubWVzc2FnZVRhcmdldCA9IGV2LnNvdXJjZTsKICAgICAgYWQuY29udGFpbmVyRWwgPSBldi5zb3VyY2UuZnJhbWVFbGVtZW50OwoKICAgICAgaWYgKGV2LmRhdGEuaW5JZnJhbWUpIHsKICAgICAgICBhZC5pZnJhbWVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgLy8gVGhpcyB3aWxsIGFscmVhZHkgZXhpc3QgaWYgdGhlIGFkIGlzIG5vdCBpbiBhbiBpZnJhbWUKICAgICAgaWYgKCFhZC5vcmlnaW4pIHsKICAgICAgICBhZC5vcmlnaW4gPSBldi5vcmlnaW47CiAgICAgIH0KCiAgICAgIC8vIElmIHRoZSBhZCBpcyBpbiBhbiBpZnJhbWUgYnV0IHdlIGRvbid0IGhhdmUgYSBjb250YWluZXIgZWxlbWVudAogICAgICAvLyB0aGF0IHByb2JhYmx5IG1lYW5zIHdlJ3JlIHNhbmRib3hlZCwgbW9zdCBsaWtlbHkgb24gYSBwYXJ0bmVyIG5ldHdvcmsKICAgICAgLy8gbGV0J3MgcHJldGVuZCB0aGF0IHdlJ3JlIG5vdCBpbiBhIGlmcmFtZSBpbiB0aGF0IGNhc2UuCiAgICAgIGlmIChhZC5pZnJhbWVkICYmICFhZC5jb250YWluZXJFbCkgewogICAgICAgIGFkLmNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaHltbmFsLWlkXScpOwogICAgICAgIGFkLmlmcmFtZWQgPSBmYWxzZTsKICAgICAgICBhZC5vcmlnaW4gPSB0aGlzLndpbmRvd0xvY2F0aW9uKCk7CiAgICAgIH0KCiAgICAgIGlmIChldi5kYXRhLmZ1bmMgJiYgZXYuZGF0YS5mdW5jIGluIHRoaXMpIHsKICAgICAgICB0aGlzW2V2LmRhdGEuZnVuY10oZXYuZGF0YS50b2tlbik7CiAgICAgIH0KCiAgICAgIGlmIChldi5kYXRhLmludGVydmFsKSB7CiAgICAgICAgdGhpcy50aHJvdHRsZUludCA9IGV2LmRhdGEuaW50ZXJ2YWw7CiAgICAgIH0KCiAgICAgIGlmICghYWQuaXNDb25uZWN0ZWQpIHsKICAgICAgICB0aGlzLmRlZmF1bHRQYXJhbXMoYWQuc2VjdXJlVG9rZW4pOwogICAgICAgIGFkLmlzQ29ubmVjdGVkID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMucXVldWVSdW5uaW5nKSB7CiAgICAgICAgdGhpcy5jcmVhdGVRdWV1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoQ2hhbmdlKGFkLnNlY3VyZVRva2VuLCAicmVjZWlwdCIpOzsKICAgICAgfQogICAgfSwKCiAgICBvbnNjcm9sbDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuZXYuc2Nyb2xsID0gZmFsc2U7CiAgICAgIHZhciBnID0gdGhpcy5nbG9iYWxEYXRhOwogICAgICBnLmRvY3VtZW50SGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7CiAgICAgIGcuc2Nyb2xsT2Zmc2V0ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwoKICAgICAgdmFyIGZyYW1lRGltczsKICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYWRzKSB7CiAgICAgICAgaWYgKHRoaXMuYWRzLmhhc093blByb3BlcnR5KGtleSkgKXsKICAgICAgICAgIGZyYW1lRGltcyA9IHRoaXMuZ2V0RnJhbWVEaW1lbnNpb25zKGtleSk7CiAgICAgICAgICBpZiAoZnJhbWVEaW1zLmhlaWdodCAhPT0gdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lSGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZUhlaWdodCA9IGZyYW1lRGltcy5oZWlnaHQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZnJhbWVEaW1zLndpZHRoICE9PSB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVXaWR0aCkgewogICAgICAgICAgICB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVXaWR0aCA9IGZyYW1lRGltcy53aWR0aDsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZVRvcFBvcyA9IGZyYW1lRGltcy50b3A7CiAgICAgICAgICB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVQb3NPblBhZ2UgPSB0aGlzLmdldGZyYW1lUG9zT25QYWdlKGZyYW1lRGltcy50b3ApOwogICAgICAgICAgdGhpcy5hZHNba2V5XS5kYXRhLnNjcm9sbFBlcmNlbnQgPSB0aGlzLmdldFNjcm9sbFBlcmNlbnRhZ2Uoa2V5KTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hDaGFuZ2Uoa2V5LCAnc2Nyb2xsJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIG9ucmVzaXplOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ldi5yZXNpemUgPSBmYWxzZTsKICAgICAgdmFyIGcgPSB0aGlzLmdsb2JhbERhdGE7CiAgICAgIGcud2luZG93V2lkdGggPSB0aGlzLmdldFdpbmRvd1dpZHRoKCk7CiAgICAgIGcud2luZG93SGVpZ2h0ID0gdGhpcy5nZXRXaW5kb3dIZWlnaHQoKTsKICAgICAgZy5kb2N1bWVudEhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OwoKICAgICAgdmFyIGZyYW1lRGltczsKICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYWRzKSB7CiAgICAgICAgaWYgKHRoaXMuYWRzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgIGZyYW1lRGltcyA9IHRoaXMuZ2V0RnJhbWVEaW1lbnNpb25zKGtleSk7CiAgICAgICAgICB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVIZWlnaHQgPSBmcmFtZURpbXMuaGVpZ2h0OwogICAgICAgICAgdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lV2lkdGggPSBmcmFtZURpbXMud2lkdGg7CiAgICAgICAgICB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVUb3BQb3MgPSBmcmFtZURpbXMudG9wOwogICAgICAgICAgdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lUG9zT25QYWdlID0gdGhpcy5nZXRmcmFtZVBvc09uUGFnZShmcmFtZURpbXMudG9wKTsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5zY3JvbGxQZXJjZW50ID0gdGhpcy5nZXRTY3JvbGxQZXJjZW50YWdlKGtleSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKGtleSwgJ3Jlc2l6ZScpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICB3aW5kb3dMb2NhdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBsID0gd2luZG93LmxvY2F0aW9uOwogICAgICBpZiAoIWwub3JpZ2luKXsKICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luID0gbC5wcm90b2NvbCArICIvLyIgKyBsLmhvc3RuYW1lICsgKGwucG9ydCA/ICc6JyArIGwucG9ydDogJycpOwogICAgICB9CiAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ub3JpZ2luOwogICAgfQoKICB9OwogIHJldHVybiBIeW1uYWxQYXJlbnQuaW5pdC5iaW5kKEh5bW5hbFBhcmVudCk7Cn0pKHdpbmRvdyk7Cg==",i="hymnal__iframe-events-"+n,o=window.document;(isInIframe()&&renderInIframe||Hymnal.settings.inPreview)&&window.frameElement&&window.frameElement.ownerDocument&&(o=window.frameElement.ownerDocument);var a=o.createElement("script"),l=e+'({inIframe: false, token: "'+eventAPIToken+'"});';o.getElementById(i)?a.innerHTML=l:(a.innerHTML=e+"="+atob(t)+" "+l,a.id=i),o.body.appendChild(a)}function executeHymnal(){!function($){var HymnalLib={version:10,info:function(){window.console&&window.console.log&&HymnalLib.ads.forEach(function(n){console.log(n.design_template+", id: "+n.id,n.getElement().get(0))})}};if("undefined"==typeof window.Hymnal||window.Hymnal.settings.inPreview){var settings={};window.Hymnal&&(settings=Hymnal.settings||{}),window.Hymnal=HymnalLib,window.Hymnal.settings=settings}!function(n){n.defaultSettings=n.defaultSettings||{},n.settings?n.settings=$.extend(_.clone(n.defaultSettings),n.settings):n.settings=n.defaultSettings,n.settings=n.settings||{},window.console=window.console||{log:function(){}},n.loggers=n.loggers||{push:function(){}},n.ConsoleLogger=n.ConsoleLogger||function(){},n.ads=n.ads||[],!n.settings.userCanViewMetrics&&$("#network-bar a[title='Network Admin Dashboard']").length>0&&(n.settings.userCanViewMetrics=!0),n.ChorusEvents=n.ChorusEvents||{AdResponseWithHTML:"Vox.Ad.ResponseWithHTML",AdRequest:"Hymnal.requestAd"}}(HymnalLib),function(n){n.util={},n.util.UserAgentProfiler=function(){var n="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,e=isInIframe()?window.frameElement.parentElement.ownerDocument.body.clientWidth:window.innerWidth,t=window.navigator.userAgent,i=n&&728>e||window.location.href.indexOf("mobile=true")>0,o=n&&e>=728,a=!i&&!o,l=i?"mobile":o?"tablet":"desktop",r=!1;if(t.indexOf("Android")>0)for(var d=t.split(";"),s=0,g=d.length;g>s;s++)if(d[s].indexOf("Android")>0){var c=d[s].split(" ");if(parseInt(c[c.length-1].split(".")[0])<3){r=!0;break}}return{screenWidth:function(){return e},profile:function(){return l},isTablet:function(){return o},isMobile:function(){return i},isDesktop:function(){return a},isAndroidLt3:function(){return r}}}(),n.util.inViewport=function(){var e=n.Events.data(),t=null;if(-1===e.frameTopPos&&-1===e.windowHeight)t=!1;else{var i=e.scrollOffset+e.windowHeight,o=e.scrollOffset,a=e.framePosOnPage,l=e.framePosOnPage+e.frameHeight;t=a>=o&&i>=l,t=t||o>=a&&l>=o,t=t||i>=a&&l>=i}return t},n.util.isPrelude=function(n){var e=-1!==n.design_template.toLowerCase().indexOf("prelude"),t=-1!==n.design_template.toLowerCase().indexOf("apex");return e&&!t},n.util.isAthena=function(n){return-1!==n.design_template.toLowerCase().indexOf("athena")},n.util.throttle=function(n,e,t){var i=null,o=!1,a=function(){return i?void(o=!0):(t=t||this,n.call(t),void(i=setTimeout(function(){var n=o;i=null,o=!1,n&&a.call(t)},e)))};return a},n.util.complete=function(n,e){var t=e||this;"complete"===document.readyState?n.call(t):window.addEventListener("load",function(){n.call(t)})}}(HymnalLib),function(n){n.Ad=function(){function e(e){e=e||{},this.type=e.type,this.id=e.id,this.design_template=e.design_template||"",this.brand=e.brand,this.campaignId=e.campaignId,this.slug=e.slug,this.fields=e.fields||{},this.adUnitID=0,this.siteID="",this.network="",this.entryType="",this.adServerVariables={},this.libraryVersion=n.version,this.aspect_ratio=e.aspect_ratio,this.preambleEnabled=e.preambleEnabled,this.preambleMarkup=e.preambleMarkup,this.trackedURLs=[],this.viewRecorded=!1,this.enable_log=!1,this.data=this.data||{},this._elementToReplace=e.elementToReplace&&$(e.elementToReplace),this._designSetupFunction=e.designSetupFunction,this._element=e.element,this.manual_view_impression=!1,this.automatic_click_through=!0,this.breakpoints={small:[0,727],medium:[728,949],large:[950,1e6]},this.content={all_html:e.html,all_css:e.css},this.clickThroughUrl=e.clickThroughUrl,this.settings={testMode:e.testMode===!0,window:e.testWindow||window},this._lifecycleEventListeners=[],this._engagementEventListeners=[],this._metricsInstrumentations=[],this._loggers=[],window.Hymnal&&window.Hymnal.ads&&window.Hymnal.ads.push(this)}return e.cssClasses={viewed:"hymnal-ad-viewed"},e.prototype.addEngagementEventListener=function(n){this._engagementEventListeners.push(n)},e.prototype.addLifecycleEventListener=function(n){this._lifecycleEventListeners.push(n)},e.prototype.addMetricsInstrumentation=function(n){this.log("Adding metrics instrumentation: "+(n.getName()||"(no name)")),this._metricsInstrumentations.push(n),n.setAd(this)},e.prototype.addLogger=function(n){this.enable_log=!0,this.log("Call to deprecated function. Use 'ad.enable_log = true' to log to console.log (if it exists)")},e.prototype.requestMoatJavascript=function(n,e){this.log("Moat support is removed")},window.console=window.console||{log:function(){}},e.prototype.log=function(n){for(var e="",t=1;t<arguments.length;t++)e+=" "+argument[t];this.enable_log&&window.console.log("HYMNAL | "+this.getSlug()+" | ",n,e)},e.prototype.render=function(){if(adCallbacks.performBeforeRender(this),this._triggerLifecycleEvent("initializing"),this._elementToReplace||(this._elementToReplace=this.findElement()),this._elementToReplace){var e=_.isString(this._elementToReplace)?$(this._elementToReplace).first():this._elementToReplace;this.getConfigurationFromDataAttributes(e),this.determineClickThroughUrl(),this.selectVariant(this.variantID),this.addClassesToHtmlElement(),n.Events.whenLive(this.defineBreakpoint.bind(this)),this.replaceAdServerVariablesInDesignHtml();var t=$(this.content.html);if(t.attr("data-hymnal-id",this.id),e.replaceWith(t),this._element=t,this.content.css){this._head=this._head||$("head");var i=$('<style type="text/css" data-for-hymnal-ad="'+this.getSlug()+'">'+this.content.css+"</style>");this._head.append(i)}if(this._designSetupFunction&&this._designSetupFunction(this.variantID),this.automatic_click_through){var o=this;$(this._element).find("#athena-click, .athena-click").click(function(n){n.stopPropagation(),n.preventDefault(),o.clickThrough()})}}var a=!1;if(this._element&&this._element.get(0)&&this._element.get(0).classList)var a=this._element.get(0).classList.contains("ad__has-preamble");a&&(this._addConcertPreamble(),this._concertLogoClickThrough()),this._triggerLifecycleEvent("render"),this._configureStandardEngagementDetection(),this._wrapUrlsWithClickThroughHandler(),adCallbacks.performAfterRender(this)},e.prototype.windowIsLandscape=function(){return n.Events.get("windowWidth")>n.Events.get("windowHeight")},e.prototype.defineBreakpoint=function(){if(document.body.classList.contains("in-hymnal-preview"))return this.listenForFakeBreakpointChange();var e=n.Events.get("windowWidth"),t=[],i=this.breakpoints;for(var o in i)i.hasOwnProperty(o)&&e>=i[o][0]&&e<=i[o][1]&&t.push("is-"+o);var a=this.windowIsLandscape()?"is-landscape":"is-portrait";t.push(a);for(var l=0;l<t.length;l++)document.body.classList.add(t[l]);n.Events.onChange("windowWidth",this.updateBreakpoint.bind(this))},e.prototype.updateBreakpoint=function(n,e){var t=[],i=[],o=this.breakpoints;for(var a in o)o.hasOwnProperty(a)&&n>=o[a][0]&&n<=o[a][1]?t.push("is-"+a):i.push("is-"+a);var l,r=["is-landscape","is-portrait"];l="string"==typeof e?Math.max(0,r.indexOf(e)):this.windowIsLandscape()?0:1,t.push(r.splice(l,1)[0]),i.push(r[0]);for(var d=Math.max(t.length,i.length),s=0;d>s;s++)i[s]&&document.body.classList.remove(i[s]),t[s]&&document.body.classList.add(t[s])},e.prototype.listenForFakeBreakpointChange=function(){try{var n=window.frameElement.parentElement}catch(e){var n=document.body}n.addEventListener("previewResize",function(n){if(n&&n.detail&&this.breakpoints[n.detail]){var e=this.breakpoints[n.detail][0],t="small"===n.detail?"is-portrait":"is-landscape";this.updateBreakpoint(e,t)}}.bind(this))},e.prototype.getConfigurationFromDataAttributes=function(n){this.legacyDfpCombinedUrls=$.trim(n.attr("data-hymnal-ad-config-click-through-url")),this.legacyDfpClickUrl=$.trim(n.attr("data-hymnal-click-through-prefix")),this.dfpClickUrl=$.trim(n.attr("data-hymnal-dfp-click-url")),this.dfpDestUrl=$.trim(n.attr("data-hymnal-dfp-dest-url")),this.adUnitID=n.attr("data-hymnal-ad-unit-id"),this.siteID=n.attr("data-hymnal-site-id"),this.variantID=n.attr("data-hymnal-design-variant-id"),this.configData=n.data(),("undefined"==typeof this.variantID||"undefined"==typeof this.fields[this.variantID])&&(this.variantID=Object.keys(this.fields)[0]),this.network=n.attr("data-hymnal-network"),this.entryType=n.attr("data-hymnal-entry-type"),(this.getTestMode()||""===this.network)&&(this.network=this.guessNetworkFromURL()),this.adServerVariables.click_through_url=this.clickThroughUrl,this.adServerVariables.ad_unit_id=this.adUnitID,this.adServerVariables.site_id=this.siteID,this.adServerVariables.network=this.network,this.adServerVariables.entry_type=this.entryType},e.prototype._combineUrlsSafely=function(n,e,t){return""===$.trim(n)?e:-1!==n.indexOf(e)||-1!==n.indexOf(encodeURI(e))?n:(t&&"function"==typeof encodeURI&&(e=encodeURI(e)),n+e)},e.prototype.determineClickThroughUrl=function(){var n=this.clickThroughUrl;if(""!==this.legacyDfpCombinedUrls&&(n=this.legacyDfpCombinedUrls,""!==this.legacyDfpClickUrl)){var e=this.legacyDfpCombinedUrls.substring(this.legacyDfpClickUrl.length,this.legacyDfpCombinedUrls.length);n=this._combineUrlsSafely(this.legacyDfpClickUrl,e,!0)}""!==this.dfpClickUrl&&""!==this.dfpDestUrl&&(n=this._combineUrlsSafely(this.dfpClickUrl,this.dfpDestUrl,!1)),this.clickThroughUrl=n,this.adServerVariables.click_through_url=this.clickThroughUrl},e.prototype.selectVariant=function(n){var e=(this.content.all_html[n]||"").trim(),t=(this.content.all_css[n]||"").trim();this.content.html=e.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.content.css=t.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.fields=this.fields[n]},e.prototype.guessNetworkFromURL=function(){for(var n=["verge","polygon","eater","racked","vox","curbed"],e=0;e<n.length;e++)if(location.host.indexOf(n[e])>-1)return n[e];return"sbn"},e.prototype.replaceAdServerVariablesInDesignHtml=function(){for(var n in this.adServerVariables){var e=new RegExp("\\$AD_SERVER\\["+n+"\\]","g");this.content.html=this.content.html.replace(e,this.adServerVariables[n])}},e.prototype._wrapUrlsWithClickThroughHandler=function(){for(var n=$(this._element).find("a[data-wrap-url], a[wrap-url]"),e=0;e<n.length;e++){var t=n.get(e);t.href=this.wrapUrlWithClickTracker(t.href)}},e.prototype.addClassesToHtmlElement=function(){for(var n="",e=["harmony-","hymnal-"],t=[this.network,this.entryType],i=0;i<t.length;i++)if("undefined"!=typeof t[i]&&t[i].length>0)for(var o=0;o<e.length;o++)n+=e[o]+t[i]+" ";this.log("adding classes to html "+n),$("html").addClass(n)},e.prototype.popUp=function(n){var e=this.getElement();if(e){var t=e.find(".hymnal-popup-message-container");0===t.length&&(t=$("<div>").addClass("hymnal-popup-message-container").css({position:"absolute",top:"0",left:"0","z-index":"1000"}).appendTo(e));var i=$("<span>").addClass("hymnal-popup-message").css({display:"none","border-radius":"5px","background-color":"white",color:"#333","float":"left",margin:"8px","margin-bottom":"0px",padding:"3px",clear:"both","user-select":"none",opacity:"0.75"}).text(n);t.append(i),i.fadeIn(),_.delay(function(){i.slideUp(500,function(){i.remove()})},4e3),_.delay(function(){0===t.find(".hymnal-popup-message").length&&t.remove()},5e3)}else window.console&&console.log&&console.log("Ad["+this.getSlug()+"] - "+n+" (pop up message not available)")},e.prototype.addTrackerImage=function(n){if(!(this.trackedURLs.indexOf(n)>=0)){this.trackedURLs.push(n);var e=document.createElement("img");e.setAttribute("src",n),e.setAttribute("height","1"),e.setAttribute("width","1"),e.setAttribute("data-tracker-hymnal-ad-id",this.id),e.setAttribute("style","position:absolute; top:0; left:0; visibility:hidden;");var t=document.body;t.insertBefore(e,t.firstChild),console&&console.log&&console.log("adding image ",n,this.trackedURLs)}},e.prototype.findElement=function(){var n=$('[data-hymnal-ad-id="'+this.id+'"]');if(0===n.length&&"string"==typeof this.type){var e=this.type.charAt(0).toUpperCase()+this.type.slice(1),t=this.design_template.charAt(0).toUpperCase()+this.design_template.toLowerCase().slice(1),i='[data-cb-ad-id="'+e+'"],[data-cb-ad-id="'+t+'"]';-1!==this.type.toLowerCase().indexOf("athena")&&(i+=',[data-cb-ad-id="Mid body"]');var o=$(i).first();o.length>0&&(n=$("<div>").attr("data-hymnal-ad-id",this.id),o.append(n))}return n=n.length>0?n.first():null},e.prototype.getElement=function(){return this._element},e.prototype.getSlug=function(){if(this.slug)return this.slug;var n=[];return this.brand&&n.push((this.brand||"").toLowerCase().replace(" ","_")),this.id&&n.push(this.id),this.slug=n.join("_"),this.slug},e.prototype.getTestMode=function(){var n=this.settings.window;return n.Hymnal&&n.Hymnal.settings&&n.Hymnal.settings.testMode===!0?!0:this.settings.testMode},e.prototype.setTestMode=function(n){this.settings.testMode=n},e.prototype.engage=function(n){this.log("Engagement: "+n),this.getTestMode()?this.popUp("Engagement: "+n):_.each(this._engagementEventListeners,function(e){_.isFunction(e)&&e(n)})},e.prototype.clickThrough=function(n){this.engage("click-through");var e=this.clickThroughUrl;"string"==typeof n&&(e=this.wrapUrlWithClickTracker(n)),e&&(this.getTestMode()?this.popUp("Open URL: "+e):(this.log("Opening URL in new window: "+e),this.settings.window.open(e,"_blank")))},e.prototype.wrapUrlWithClickTracker=function(n){var e=this.dfpClickUrl,t=!1;return e||(t=!0,e=this.legacyDfpClickUrl),e.length>0?this._combineUrlsSafely(e,n,t):n},e.prototype._addConcertPreamble=function(){if(!this.preambleMarkup)return this.log("Preamble markup unavailable, Concert Preamble will not be added."),!1;var n=document.createElement("div");n.innerHTML=this.preambleMarkup;var e=n.firstElementChild;if(this.getElement().get(0)){var t=this.getElement().get(0);t.insertBefore(e,t.firstElementChild)}},e.prototype._concertLogoClickThrough=function(){var n=this.getElement().get(0);return n&&n.querySelector(".ad__concert-link")?(n=n.querySelector(".ad__concert-link"),void n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),this.settings.window.open(n.href,"_blank")}.bind(this))):!1},e.prototype._triggerLifecycleEvent=function(n){this.log("Lifecycle: "+n);var e=this;_.each(this._lifecycleEventListeners,function(t){t(n,e)})},e.prototype._configureStandardEngagementDetection=function(){var t=this.getElement(),i=("scroll."+this.getSlug(),this),o=function(){i.viewRecorded||(i.engage("view"),t.addClass(e.cssClasses.viewed),i.viewRecorded=!0)};i.manual_view_impression&&(i.log("Suppressing automatic view setup"),
o=function(){}),t&&t.length>0&&n.Events.whenLive(function(){n.util.inViewport()?o():n.Events.onScroll(function(){n.util.inViewport()&&!i.viewRecorded&&o()})})},e}()}(HymnalLib),function(n){n.MetricsInstrumentation||!function(){n.MetricsInstrumentation=function(){function n(n){n=n||{},this._name=n.name,this._adProperties=n.adProperties,this._setupFunction=n.setupFunction,this._engagementEventListener=n.engagementEventListener,this._ad=null}return n.prototype.getName=function(){return this._name},n.prototype.setAd=function(n){var e=this;this._ad=n,_.isObject(this._adProperties)&&_.each(this._adProperties,function(n,t){e._ad.log(e._name+' adding property to Ad; key: "'+t+'", value: "'+n+'"'),e._ad[t]=n}),this._setupFunction&&this._ad.addLifecycleEventListener(function(n,t){"render"===n&&e._setupFunction(t)}),this._engagementEventListener&&this._ad.addEngagementEventListener(this._engagementEventListener)},n}()}()}(HymnalLib),function(n){n.DefaultEvents||!function(){n.DefaultEvents=function(){function n(n){return n=n||{},this._name=n.name,e}var e=function(n,e){$(document).triggerHandler("hymnal:"+n,{ad:e})};return n}()}()}(HymnalLib),function(n){n.Prefix||(n.Prefix=function(){var n=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||""===n.OLink&&["","o"])[1];return{css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}}())}(HymnalLib),function(n){"use strict";return"object"!=typeof n?void console.error("Hymnal must be the Hymnal library"):void(n.VideoElement=function(){function e(e,t){function i(){n.VoxMetrics&&n.VoxMetrics.log("play")}function o(e){n.VoxMetrics&&n.VoxMetrics.log("3s_played")}function a(e){if(n.VoxMetrics){var t=(25*e).toString();n.VoxMetrics.log(t+"pct_played")}}function l(){n.VoxMetrics&&n.VoxMetrics.log("unmuted")}function r(){var n=Object.keys(x);n.forEach(function(n){var e=x[n].eventHandler||s;H.addEventListener(n,e)}),x.playing.queue.push(function(){L=!0,E=!0,i()}),x.pause.queue.push(function(){L=!1}),x.timeupdate.queue.push(function(n){n.currentTime>=3&&!B&&(o(n),B=!0)}),x.timeupdate.queue.push(function(n){n.percentComplete>25*k&&(a(k),k++)}),x.ended.queue.push(function(){a(k)}),(v.muted||v.autoplay)&&x.volumechange.queue.push(function(){return W?!1:(W=!0,void l())})}function d(n){return x[n]&&x[n].queue&&x[n].queue.length?!0:!1}function s(n){d(n.type)&&x[n.type].queue.forEach(function(e){e.call(this,n)})}function g(n){var e={currentTime:n.srcElement.currentTime,duration:n.srcElement.duration,percentComplete:Math.round(n.srcElement.currentTime/n.srcElement.duration*100)};d(n.type)&&x[n.type].queue.forEach(function(n){n.call(this,e)})}function c(n){d(n.type)&&x[n.type].queue.forEach(function(n){n.call(this,data)}),E?L&&V.muted?(V.muted=!1,h(["muted"])):L?H.pause():w&&!G?(G=!0,w()):H.play():H.play()}function u(){var n=V,e=v;n.autoplay=e.hasOwnProperty("autoplay")?e.autoplay:!1,n.poster=e.hasOwnProperty("poster")?e.poster:"",n.preload=e.hasOwnProperty("preload")?e.preload:"metadata",n.muted=e.hasOwnProperty("muteByDefault")?e.muteByDefault:!1,n.fullscreen=e.hasOwnProperty("allowFullscreen")?e.allowFullscreen:!0,n.controls=e.hasOwnProperty("showControls")?e.showControls:!0,n.playsInline=e.hasOwnProperty("playsInline")?e.playsInline:!0,n.loop=e.hasOwnProperty("loop")?e.loop:!0,e.hasOwnProperty("customPlayer")&&e.customPlayer&&(n.controls=!1),n.autoplay&&(n.muted=!0,n.playsInline=!0)}function h(n){n.forEach(function(n){H[n]=V[n]})}function p(e){m(),H=document.createElement("video"),H.classList.add("ad__video-element"),H.id=y,h(Object.keys(V)),b(),r(),v.customPlayer&&(Z=new n.VideoController(H,f)),I()}function m(){y="hialisha"+Math.random().toString(36).substring(5)}function I(){f.appendChild(H)}function C(n,e){var t=document.createElement("source");return t.setAttribute("src",e),t.setAttribute("type","video/"+n),t}function b(){_&&H.appendChild(C("webm",_)),H.appendChild(C("mp4",R))}function A(e){(n.settings.inPreview||n.settings.log_enabled)&&console.error("Hymnal.VideoElement:",e)}var f=null,y=null,v=null,Z=null,w=null,G=!1,W=!1,_="",R="",H=null,V={},k=1,B=!1,x={canplay:{queue:[]},ended:{queue:[]},playing:{queue:[]},pause:{queue:[]},click:{queue:[],eventHandler:c},timeupdate:{queue:[],eventHandler:g},volumechange:{queue:[]}},E=!1,L=!1;if(!e)return A("The videoContainerElement must be a HTML element"),!1;(!t||!t.files&&t.files.mp4)&&A("A MP4 version of the video is required."),n.VoxMetrics=new n.MetricsReporting,f=e,v=t,_=v.files.webm?v.files.webm:!1,R=v.files.mp4,u(),p(settings);var Y={};return Y.isPlaying=function(){return L},Y.canPlayThrough=function(){return 4===H.readyState},Y.play=function(){H.play()},Y.pause=function(){H.pause()},Y.mute=function(){V.muted=!0,h(["muted"])},Y.unmute=function(){V.muted=!1,h(["muted"])},Y.loop=function(){V.loop=!0,h(["loop"])},Y.disableLoop=function(){V.loop=!1,h(["loop"])},Y.showControls=function(){V.controls=!0,h(["controls"])},Y.hideControls=function(){V.controls=!1,h(["controls"])},Y.autoplay=function(){V.muted=!0,V.autoplay=!0,V.playsInline=!0,updatevideoSettings(["playsInline","muted","autoplay"])},Y.addClickthrough=function(n){w=n},Y.preload=function(n){V.preload="auto",h(["preload"])},Y.onPlayerReady=function(n){x.canplay.queue.push(n)},Y.onPlay=function(n){x.playing.queue.push(n)},Y.onPause=function(n){x.pause.queue.push(n)},Y.onComplete=function(n){x.ended.queue.push(n)},Y.onTimeUpdate=function(n){x.timeupdate.queue.push(n)},Y.onVolumeChange=function(){x.volumechange.queue.push(func)},Y}return e}())}(HymnalLib),function(n){return"object"!=typeof n?void console.error("Hymnal must be the Hymnal library"):void(n.VideoController=function(){function n(n,t){m=s(),I=n,C=t,t.appendChild(m),e()}function e(){t(),i(),o()}function t(){A.playButton=document.getElementById("ad__play-pause"),A.playButton.addEventListener("click",function(){b?I.pause():(I.muted&&(I.muted=!1),I.play())}),A.playButton.innerHTML="<p>Play</p>"+h,a(),l()}function i(){A.volumeButton=document.getElementById("ad__volume"),A.volumeButton.addEventListener("click",function(){I.muted=!I.muted}),g(),r()}function o(){A.progressBar=document.getElementById("ad__progress-bar");var n=A.progressBar.querySelector("circle");A.progressBarLength=2*n.getAttribute("r")*Math.PI,A.progressBar.style.strokeDasharray=A.progressBarLength,d()}function a(){I.addEventListener("pause",function(){b=!1,A.playButton.innerHTML="<p>Play</p>"+h})}function l(){I.addEventListener("play",function(){b=!0,A.playButton.innerHTML="<p>Pause</p>"+p,g()})}function r(){I.addEventListener("volumechange",function(n){g()})}function d(){I.addEventListener("timeupdate",function(n){var e=I.currentTime/I.duration;e*=A.progressBarLength,A.progressBar.style.strokeDashoffset=A.progressBarLength-e})}function s(){var n=document.createElement("div");return n.id="ad__video-controller",n.innerHTML=['<nav id="ad__video-controls">','<button type="button" id="ad__volume"></button>','<div id="ad__progress-container">','<svg id="ad__progress-bg" width="49px" height="49px" viewBox="455 341 49 49" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><circle id="Oval" stroke="#000000" opacity=".5" stroke-width="6" fill="none" cx="479.5" cy="365.5" r="21"></circle></svg>','<svg id="ad__progress-bar" width="49px" height="49px" viewBox="455 341 49 49" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><circle id="Oval" stroke="#FFFFFF" stroke-width="3" fill="none" cx="479.5" cy="365.5" r="21"></circle></svg>','<button type="button" id="ad__play-pause"><p>Play</p></button>',"</div>","</nav>"].join(""),n}function g(){I.muted?A.volumeButton.innerHTML=c:A.volumeButton.innerHTML=u}var c='<svg id="mute-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><title>Unmute Audio</title><path d="M19.9,8.51A0.77,0.77,0,0,0,18.59,8l-5.51,5.48H9.57A2.87,2.87,0,0,0,6.7,16.3v7.38a2.87,2.87,0,0,0,.07.6L19.89,11.15V8.51Z"/><path d="M22.81,11.64a0.8,0.8,0,0,0-1.13,0l-1.79,1.79h0L7.57,25.74,5.06,28.25a0.8,0.8,0,1,0,1.13,1.13l8.25-8.25,5.43-5.43h0l2.93-2.93A0.8,0.8,0,0,0,22.81,11.64Z"/><path d="M13,26.55L18.5,32a0.77,0.77,0,0,0,1.31-.54L19.87,18l-8.58,8.58H13Z"/></svg>',u='<svg id="volume-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><title>Mute Audio</title><path d="M19.43,7.79a0.77,0.77,0,0,0-.84.16l-5.5,5.48H9.57A2.87,2.87,0,0,0,6.7,16.3v7.38a2.87,2.87,0,0,0,2.87,2.87H13L18.5,32a0.77,0.77,0,0,0,1.31-.54l0.1-23A0.77,0.77,0,0,0,19.43,7.79Z"/><path d="M24.29,22.86a0.77,0.77,0,0,0,0,1.54,4.4,4.4,0,1,0,0-8.8,0.77,0.77,0,0,0,0,1.54A2.86,2.86,0,1,1,24.29,22.86Z"/><path d="M24.29,27.78a7.78,7.78,0,1,0,0-15.56,0.77,0.77,0,0,0,0,1.54,6.24,6.24,0,1,1,0,12.49A0.77,0.77,0,0,0,24.29,27.78Z"/><path d="M24.29,9.12a0.77,0.77,0,0,0,0,1.54,9.35,9.35,0,1,1,0,18.7,0.77,0.77,0,0,0,0,1.54A10.88,10.88,0,1,0,24.29,9.12Z"/></svg>',h='<svg id="play-icon" width="57px" height="65px" viewBox="41 29 57 65" version="1.1" xmlns="http://www.w3.org/2000/svg"><polygon points="97.6399983 61.36 41.63 93.7 41.63 29.03"></polygon></svg>',p='<svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><title>Pause Video</title><rect x="22.77" y="8.01" width="8.25" height="23.98"/><rect x="8.98" y="8.01" width="8.25" height="23.98"/></svg>',m=null,I=null,C=null,b=!1,A={};return n}())}(HymnalLib),function(n){function e(n){return y.connectionEstablished?n():y.subs.connectionEstablished?y.subs.connectionEstablished.push(n):y.subs.connectionEstablished=[n],A()}function t(){return y.data.current}function i(n,e,t){return y.connectionEstablished?(b(n)&&(t?y.subs[n].push(p(t,e)):y.subs[n].push(e)),this):(A(i,[n,e,t]),this)}function o(n){return"function"==typeof n?i("scrollOffset",n):!1}function a(n){return y.connectionEstablished?b(n)?y.data.current[n]:!1:(A(a,[n]),this)}function l(){var n=3===arguments.length?Array.isArray(arguments[2]):!0;return"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&n?i.apply(this,arguments):(window.console&&window.console.error&&console.error(".onChange called with wrong data types. Acceptable arguments are (property, callback, [array])"),this)}function r(){for(var n=["windowWidth","windowHeight","documentHeight","scrollOffset","frameHeight","frameWidth","frameTopPos","framePosOnPage","scrollPercent"],e=y.data.current={},t=0;t<n.length;t++)e[n[t]]=-1}function d(n){return n.token?(y.token=n.token,void window.addEventListener("message",function(n){var e=n.data.token&&n.data.token===y.token,t=n.data.sender&&"parent"===n.data.sender;if(!e||!t)return!1;if(n.data.type&&"turbo"===n.data.type)I(n.data.params);else{var i=y.data;i.previous?i.previous=i.current:(i.previous=i.current,c()),i.current=n.data.params,C()}})):!1}function s(n){y.subs[n]&&y.subs[n].length&&y.subs[n].forEach(function(e){e(y.data.current[n])})}function g(){if(y.subs.connectionEstablished.length>0){var n=y.subs.connectionEstablished;do n.shift()();while(n.length)}}function c(){for(var n in y.data.current)y.data.current.hasOwnProperty(n)&&(y.subs[n]=[]);y.connectionEstablished=!0,Date.now()>y.timeout&&A(null,null,!0)}function u(){var n=window.location;return n.origin?n.origin:n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")}function h(){if(y.connectionEstablished)return!0;var e={sender:"child",token:y.token};return n.settings.inPreview&&(e.inIframe=!0),parent.postMessage(e,u()),Date.now()<y.timeout?setTimeout(h,50):void 0}function p(n,e){function t(n){n>=o&&i>=n&&e.call(this,n)}var i=Math.max(n[0],n[1]),o=Math.min(n[0],n[1]);return t.bind(this)}function m(n){if(!y.connectionEstablished)return A(m,[n]),this;y.data.turbo={cb:n,current:y.data.current.scrollPercent||0,previous:y.data.current.scrollPercent||0};var e={sender:"child",token:y.token,func:"turboMode"};parent.postMessage(e,u())}function I(n){var e=y.data.turbo;e.previous=e.current,e.current=n,e.previous!==e.current&&e.cb(e.current)}function C(){var n=y.data;for(var e in n.current)n.current.hasOwnProperty(e)&&n.previous.hasOwnProperty(e)&&n.current[e]!==n.previous[e]&&s(e)}function b(n){if(!y.subs[n]){var e=Object.keys(y.subs).join(", "),t="Sorry, "+n+" is unrecognized. You can subscribe to changes on the following values: "+e;return window.console&&window.console.error&&console.error(t),!1}return!0}function A(n,e,t){function i(){if(o=!1,Date.now()>=y.timeout&&!t)return window.console&&window.console.log&&console.log("Hymnal Ad "+y.token.split("_")[0]+" unable to connect to events lib."),!1;if(y.connectionEstablished){if(g(),v.length>0)do{var n=v.shift();n&&n[0].apply(this,n[1])}while(v.length>0);return!0}return setTimeout(i,50)}var o=!0;!y.connectionEstablished&&n&&v.push([n,e]),!y.connectionEstablished&&o&&(y.clearQueue=i()),t&&i()}function f(e){r(),d(e),(e.inIframe||n.settings.inPreview)&&h()}if(n&&!n.util)return void(window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library"));var y={token:null,connectionEstablished:!1,events:["resize","scroll"],subs:{},data:{},timeout:Date.now()+3e3},v=[];n.IframeEventLib=function(n){return f(n),{data:t,get:a,onChange:l,onScroll:o,whenLive:e,turboMode:m}}}(HymnalLib),function(){function n(n){this.message=n}var e="undefined"!=typeof exports?exports:self,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var i,o,a=String(e),l=0,r=t,d="";a.charAt(0|l)||(r="=",l%1);d+=r.charAt(63&i>>8-l%1*8)){if(o=a.charCodeAt(l+=.75),o>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|o}return d}),e.atob||(e.atob=function(e){var i=String(e).replace(/=+$/,"");if(i.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,a,l=0,r=0,d="";a=i.charAt(r++);~a&&(o=l%4?64*o+a:a,l++%4)?d+=String.fromCharCode(255&o>>(-2*l&6)):0)a=t.indexOf(a);return d})}(),function(n){n.IframeStyleHelper||(n.IframeStyleHelper=function(){function e(e,t,i){if(!n.settings.inPreview){var o='<style type="text/css" data-for-hymnal-ad="'+e.getSlug()+'">'+t+"</style>",a=null;a=i?parent.document.getElementsByTagName("head"):document.getElementsByTagName("head"),$(a).append(o)}}return{addStyles:e}}())}(HymnalLib),function(n){"use strict";return"object"!=typeof n?void console.error("Hymnal must be the Hymnal library"):void(n.MetricsReporting=function(){function e(){function e(e){if(!o)return!1;var l={action:e,ad_id:o,network:i};a&&(l.variant_id=a),n.settings.inPreview?console.log("[fake] Logging to Phonograph",l):window.phonographEvents.push([t,l])}function l(){var n=document.createElement("script");n.src="https://phonograph2.voxmedia.com/pickup.js",n.type="text/javascript",n.async=!0,document.body.appendChild(n)}"undefined"==typeof window.phonographEvents&&(window.phonographEvents=[],l()),adCallbacks.afterRender(function(){o=this.id,a=this.variantID});var r={};return r.log=function(n){n&&e(n)},r.trackVideo=function(n){n.onPlay(function(){this.log("play")}.bind(this)),n.onQuartile(function(n){this.log(n+"pct_played")}.bind(this)),n.onPause(function(){this.log("pause")}.bind(this))},r}var t="hymnal_event",i=window.location.hostname,o=null,a=null;return e}())}(HymnalLib),function(n){"use strict";return"object"!=typeof n?void console.error("Hymnal must be the Hymnal library"):void(n.MetricPixels=function(){function n(){}var e=[],t=[],i=function(n){var e=-1==n.indexOf("?")?"?":"&";n+=e+"mp_uniq="+Math.floor(1e4*Math.random());var t=document.createElement("img");t.setAttribute("src",encodeURI(n)),t.setAttribute("height","1"),t.setAttribute("width","1"),t.setAttribute("data-metric-pixels",!0),t.setAttribute("style","position:absolute; top:0; left:0; visibility:hidden;");var i=document.body;i.insertBefore(t,i.firstChild)},o=function(n){return e.filter(function(e){return e[0]==n}).map(function(n){return n[1]})},a=n.prototype={};return a.add=function(n,t){e.push([n,t])},a.log=function(n){t.push(n),o(n).forEach(function(n){i(n)}.bind(this))},a.logNonRepeatable=function(n){-1==t.indexOf(n)&&this.log(n)},a.trackVideo=function(n){n&&"function"==typeof n.onPlay&&(n.onPlay(function(){this.log("video-start")}.bind(this)),n.onQuartile(function(n){this.log("video-"+n)}.bind(this)),n.onPause(function(){this.log("video-pause")}.bind(this)))},n}())}(HymnalLib),function(n){n.Data||(n.Data=function(n,e){$.getJSON(n).done(e)})}(HymnalLib),function(n){n.IframeResize||(n.IframeResize=function(){function n(n,e,t,i){if(n.settings.window&&n.settings.window.frameElement){var o=n.settings.window.frameElement;t&&(o.style.transition="height 0.5s ease"),o.height=e,n.data.disableAspectRatioHandler=i}else n.log("Unable to resize iframe")}return{resizeIframeHeight:n}}())}(HymnalLib),function(Hymnal){renderInIframe?setupEventsAPI():adCallbacks.afterRender(setupEventsAPI),Hymnal.Events=Hymnal.IframeEventLib({inIframe:!1,token:eventAPIToken.toString()}),$(function(){var ad=new Hymnal.Ad({id:"956bce3a-7ad9-40c2-9f12-58307330cdd8",slug:"infiniti_chinatown_content_link_956bce3a-7ad9-40c2-9f12-58307330cdd8",type:"Native Ad",campaign:"infiniti_qx_30_1032",campaign_name:"QX 30",brand:"Infiniti",design_template:"Native Ad Content Link",preambleEnabled:!1,preambleMarkup:'<div class="m-adbar">\n  <a href="http://www.voxmedia.com/pages/concert" class="ad__concert-link">\n  <svg viewBox="0 0 11 16" class="ad__concert-logo"><title>Concert</title><path d="M11,16H5.49A5.47,5.47,0,0,1,.64,8,5.48,5.48,0,0,1,5.49,0H11V5.9H5.49A4.62,4.62,0,0,0,1.63,8a4.62,4.62,0,0,0,3.86,2.1H11V16ZM1.19,8.87a4.48,4.48,0,0,0-.31,1.65,4.6,4.6,0,0,0,4.61,4.59h4.61V11H5.49A5.47,5.47,0,0,1,1.19,8.87Zm4.3-8a4.62,4.62,0,0,0-4.3,6.29,5.45,5.45,0,0,1,4.3-2.09h4.61V0.88H5.49Z"/></svg>\n  </a>\n  From Our Sponsor\n</div>\n',aspect_ratio:{mobile:.6666666666666666,desktop:1.6898954703832754},html:{fa6794604717ab5fe6e5dafc90a373ef:'<div class=\\"m-entry-box native-ad-content-link\\" data-native-ad-id=\\"container\\"><header class=\\"m-block-header\\"><span class=\\"m-block-header__tag preamble\\" data-native-ad-id=\\"preamble_text\\"><a href=\\"$AD_SERVER[click_through_url]\\">Presented By<\\/a><\\/span><\\/header><div class=\\"m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail\\"><a href=\\"$AD_SERVER[click_through_url]\\" data-native-ad-id=\\"thumbnail\\"><img src=\\"https://hymnal-prod.vox-cdn.com/thumbor/pPGmpy3dp-C1LuCX6oR6lwL06Zs=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/32835/Chinatown.jpg\\" alt=\\"\\" /><\\/a><\\/div><div class=\\"m-entry-box__body\\"><h3><a data-analytics-link=\\"placeableadunit\\" data-native-ad-id=\\"headline\\" href=\\"$AD_SERVER[click_through_url]\\">Check out the Small Markets where Locals Chow Down in Chinatown<\\/a><\\/h3><p class=\\"m-entry-box__byline p-byline\\" data-native-ad-id=\\"byline\\">Infiniti<\\/p><p class=\\"m-entry-box__blurb\\" data-native-ad-id=\\"body_text\\"><\\/p><div class=\\"m-entry-box__native-logo\\"><img data-native-ad-id=\\"logo\\" src=\\"https://hymnal-prod.vox-cdn.com/thumbor/GHHkLEYrC-YtgfVCpL1D57GZzZw=/fit-in/100x30/hymnal-prod.vox-cdn.com/uploads/asset/file/32742/Infiniti_Logo_200x120_JL__1___1_.png\\" alt=\\"\\"><\\/div><\\/div><\\/div>',a7b818b3a31791dec52ccc66d758fcb3:'<div class=\\"m-entry-box native-ad-content-link\\" data-native-ad-id=\\"container\\"><header class=\\"m-block-header\\"><span class=\\"m-block-header__tag preamble\\" data-native-ad-id=\\"preamble_text\\"><a href=\\"$AD_SERVER[click_through_url]\\">Presented By<\\/a><\\/span><\\/header><div class=\\"m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail\\"><a href=\\"$AD_SERVER[click_through_url]\\" data-native-ad-id=\\"thumbnail\\"><img src=\\"https://hymnal-prod.vox-cdn.com/thumbor/pPGmpy3dp-C1LuCX6oR6lwL06Zs=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/32835/Chinatown.jpg\\" alt=\\"\\" /><\\/a><\\/div><div class=\\"m-entry-box__body\\"><h3><a data-analytics-link=\\"placeableadunit\\" data-native-ad-id=\\"headline\\" href=\\"$AD_SERVER[click_through_url]\\">See Where Locals in Chinatown Buy their Rice Noodles and Savor Dim Sum<\\/a><\\/h3><p class=\\"m-entry-box__byline p-byline\\" data-native-ad-id=\\"byline\\">Infiniti<\\/p><p class=\\"m-entry-box__blurb\\" data-native-ad-id=\\"body_text\\"><\\/p><div class=\\"m-entry-box__native-logo\\"><img data-native-ad-id=\\"logo\\" src=\\"https://hymnal-prod.vox-cdn.com/thumbor/GHHkLEYrC-YtgfVCpL1D57GZzZw=/fit-in/100x30/hymnal-prod.vox-cdn.com/uploads/asset/file/32742/Infiniti_Logo_200x120_JL__1___1_.png\\" alt=\\"\\"><\\/div><\\/div><\\/div>',"3601791236e690494cbd8dcf4992e6a9":'<div class=\\"m-entry-box native-ad-content-link\\" data-native-ad-id=\\"container\\"><header class=\\"m-block-header\\"><span class=\\"m-block-header__tag preamble\\" data-native-ad-id=\\"preamble_text\\"><a href=\\"$AD_SERVER[click_through_url]\\">Presented By<\\/a><\\/span><\\/header><div class=\\"m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail\\"><a href=\\"$AD_SERVER[click_through_url]\\" data-native-ad-id=\\"thumbnail\\"><img src=\\"https://hymnal-prod.vox-cdn.com/thumbor/pPGmpy3dp-C1LuCX6oR6lwL06Zs=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/32835/Chinatown.jpg\\" alt=\\"\\" /><\\/a><\\/div><div class=\\"m-entry-box__body\\"><h3><a data-analytics-link=\\"placeableadunit\\" data-native-ad-id=\\"headline\\" href=\\"$AD_SERVER[click_through_url]\\">No Chop Suey Here \u2014 Learn Where to Eat in Chinatown from the People Who Know it Best<\\/a><\\/h3><p class=\\"m-entry-box__byline p-byline\\" data-native-ad-id=\\"byline\\">Infiniti<\\/p><p class=\\"m-entry-box__blurb\\" data-native-ad-id=\\"body_text\\"><\\/p><div class=\\"m-entry-box__native-logo\\"><img data-native-ad-id=\\"logo\\" src=\\"https://hymnal-prod.vox-cdn.com/thumbor/GHHkLEYrC-YtgfVCpL1D57GZzZw=/fit-in/100x30/hymnal-prod.vox-cdn.com/uploads/asset/file/32742/Infiniti_Logo_200x120_JL__1___1_.png\\" alt=\\"\\"><\\/div><\\/div><\\/div>'},css:"",fields:{fa6794604717ab5fe6e5dafc90a373ef:{html:'<div class="m-entry-box native-ad-content-link" data-native-ad-id="container">\n  <header class="m-block-header">\n    <span class="m-block-header__tag preamble" data-native-ad-id="preamble_text">\n      <a href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[preamble]</a>\n    </span>\n  </header>\n\n  <div class="m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail">\n    <a href="$AD_SERVER[click_through_url]" data-native-ad-id="thumbnail">\n      <img src="$TEMPLATE_IMAGE[thumbnail]" alt="" />\n    </a>\n  </div>\n  <div class="m-entry-box__body">\n    <h3>\n      <a data-analytics-link="placeableadunit" data-native-ad-id="headline" href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[title]</a>\n    </h3>\n    <p class="m-entry-box__byline p-byline" data-native-ad-id="byline">$TEMPLATE_TEXT[byline]</p>\n\n    <p class="m-entry-box__blurb" data-native-ad-id="body_text">$TEMPLATE_TEXT[description]</p>\n    <div class="m-entry-box__native-logo">\n      <img data-native-ad-id="logo" src="$TEMPLATE_IMAGE[logo]" alt="$TEMPLATE_TEXT[description]">\n    </div>\n  </div>\n</div>\n',css:"\n/* all styled on publisher's site, the below is FOR PREVIEW ONLY */\n.m {\n\n  &-entry-box {\n    width: 342px;\n    border:1px solid rgb(224, 224, 224);\n    padding: 10px;\n    overflow: hidden;\n    font-family: Helvetica, Arial, sans-serif;\n    line-height: 1.2;\n\n    * {\n      box-sizing: border-box;\n    }\n  }\n\n  &-block-header {\n    display: table;\n    width: 100%;\n    font-size: 11px;\n    border-bottom: 0;\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  &-block-header__tag {\n    font-weight: normal;\n    color: $TEMPLATE_COLOR[brand_color];\n    border-color: $TEMPLATE_COLOR[brand_color];\n    display: table-cell;\n    text-align: left;\n\n    a {\n      color: #ff3200;\n      text-transform: uppercase;\n      display: inline-block;\n      padding-bottom: 2px;\n      font-size: 11px;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__thumb {\n    float: none;\n    width: 100%;\n    margin-right: 0;\n    margin-top: 0;\n    display: block;\n    max-height: 195px;\n    overflow: hidden;\n    position: relative;\n\n    a {\n      text-decoration: none;\n    }\n\n    img {\n      height: auto;\n      display: inline;\n      width: 100%;\n    }\n  }\n\n  &-entry-box__body {\n    float: none;\n    width: 100%;\n    padding: 10px 0 0;\n    font-size: 14px;\n\n    h3 {\n      font-weight: normal;\n      font-size: 22px;\n      margin: 0 0 10px 0;\n      display: block;\n    }\n\n    a {\n      color: #333;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__byline{\n    margin: 0;\n    margin-top: 8px;\n    font-size: 11px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__blurb {\n    margin: 8px 0 0 0;\n    font-size: 13px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__native-logo {\n    margin-top: 10px;\n\n    img {\n    max-width: 100px;\n    max-height: 33px;\n    }\n  }\n\n}\n",js:"// This value intentionally left blank\n",click_through_url:"",preamble_text:"ADVERTISEMENT",thumbnail:"https://hymnal-prod.vox-cdn.com/thumbor/pPGmpy3dp-C1LuCX6oR6lwL06Zs=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/32835/Chinatown.jpg",brand_color:"#80c0c0",logo:"https://hymnal-prod.vox-cdn.com/thumbor/GHHkLEYrC-YtgfVCpL1D57GZzZw=/fit-in/100x30/hymnal-prod.vox-cdn.com/uploads/asset/file/32742/Infiniti_Logo_200x120_JL__1___1_.png",title:"Check out the Small Markets where Locals Chow Down in Chinatown ",byline:"Infiniti",description:"",pull_quote:"",preamble:"Presented By",eyebrow:"From Our Sponsor",tooltip:""},a7b818b3a31791dec52ccc66d758fcb3:{html:'<div class="m-entry-box native-ad-content-link" data-native-ad-id="container">\n  <header class="m-block-header">\n    <span class="m-block-header__tag preamble" data-native-ad-id="preamble_text">\n      <a href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[preamble]</a>\n    </span>\n  </header>\n\n  <div class="m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail">\n    <a href="$AD_SERVER[click_through_url]" data-native-ad-id="thumbnail">\n      <img src="$TEMPLATE_IMAGE[thumbnail]" alt="" />\n    </a>\n  </div>\n  <div class="m-entry-box__body">\n    <h3>\n      <a data-analytics-link="placeableadunit" data-native-ad-id="headline" href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[title]</a>\n    </h3>\n    <p class="m-entry-box__byline p-byline" data-native-ad-id="byline">$TEMPLATE_TEXT[byline]</p>\n\n    <p class="m-entry-box__blurb" data-native-ad-id="body_text">$TEMPLATE_TEXT[description]</p>\n    <div class="m-entry-box__native-logo">\n      <img data-native-ad-id="logo" src="$TEMPLATE_IMAGE[logo]" alt="$TEMPLATE_TEXT[description]">\n    </div>\n  </div>\n</div>\n',css:"\n/* all styled on publisher's site, the below is FOR PREVIEW ONLY */\n.m {\n\n  &-entry-box {\n    width: 342px;\n    border:1px solid rgb(224, 224, 224);\n    padding: 10px;\n    overflow: hidden;\n    font-family: Helvetica, Arial, sans-serif;\n    line-height: 1.2;\n\n    * {\n      box-sizing: border-box;\n    }\n  }\n\n  &-block-header {\n    display: table;\n    width: 100%;\n    font-size: 11px;\n    border-bottom: 0;\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  &-block-header__tag {\n    font-weight: normal;\n    color: $TEMPLATE_COLOR[brand_color];\n    border-color: $TEMPLATE_COLOR[brand_color];\n    display: table-cell;\n    text-align: left;\n\n    a {\n      color: #ff3200;\n      text-transform: uppercase;\n      display: inline-block;\n      padding-bottom: 2px;\n      font-size: 11px;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__thumb {\n    float: none;\n    width: 100%;\n    margin-right: 0;\n    margin-top: 0;\n    display: block;\n    max-height: 195px;\n    overflow: hidden;\n    position: relative;\n\n    a {\n      text-decoration: none;\n    }\n\n    img {\n      height: auto;\n      display: inline;\n      width: 100%;\n    }\n  }\n\n  &-entry-box__body {\n    float: none;\n    width: 100%;\n    padding: 10px 0 0;\n    font-size: 14px;\n\n    h3 {\n      font-weight: normal;\n      font-size: 22px;\n      margin: 0 0 10px 0;\n      display: block;\n    }\n\n    a {\n      color: #333;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__byline{\n    margin: 0;\n    margin-top: 8px;\n    font-size: 11px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__blurb {\n    margin: 8px 0 0 0;\n    font-size: 13px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__native-logo {\n    margin-top: 10px;\n\n    img {\n    max-width: 100px;\n    max-height: 33px;\n    }\n  }\n\n}\n",js:"// This value intentionally left blank\n",click_through_url:"",preamble_text:"ADVERTISEMENT",thumbnail:"https://hymnal-prod.vox-cdn.com/thumbor/pPGmpy3dp-C1LuCX6oR6lwL06Zs=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/32835/Chinatown.jpg",brand_color:"#80c0c0",logo:"https://hymnal-prod.vox-cdn.com/thumbor/GHHkLEYrC-YtgfVCpL1D57GZzZw=/fit-in/100x30/hymnal-prod.vox-cdn.com/uploads/asset/file/32742/Infiniti_Logo_200x120_JL__1___1_.png",title:"See Where Locals in Chinatown Buy their Rice Noodles and Savor Dim Sum",byline:"Infiniti",description:"",pull_quote:"",preamble:"Presented By",eyebrow:"From Our Sponsor",tooltip:""},"3601791236e690494cbd8dcf4992e6a9":{html:'<div class="m-entry-box native-ad-content-link" data-native-ad-id="container">\n  <header class="m-block-header">\n    <span class="m-block-header__tag preamble" data-native-ad-id="preamble_text">\n      <a href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[preamble]</a>\n    </span>\n  </header>\n\n  <div class="m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail">\n    <a href="$AD_SERVER[click_through_url]" data-native-ad-id="thumbnail">\n      <img src="$TEMPLATE_IMAGE[thumbnail]" alt="" />\n    </a>\n  </div>\n  <div class="m-entry-box__body">\n    <h3>\n      <a data-analytics-link="placeableadunit" data-native-ad-id="headline" href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[title]</a>\n    </h3>\n    <p class="m-entry-box__byline p-byline" data-native-ad-id="byline">$TEMPLATE_TEXT[byline]</p>\n\n    <p class="m-entry-box__blurb" data-native-ad-id="body_text">$TEMPLATE_TEXT[description]</p>\n    <div class="m-entry-box__native-logo">\n      <img data-native-ad-id="logo" src="$TEMPLATE_IMAGE[logo]" alt="$TEMPLATE_TEXT[description]">\n    </div>\n  </div>\n</div>\n',css:"\n/* all styled on publisher's site, the below is FOR PREVIEW ONLY */\n.m {\n\n  &-entry-box {\n    width: 342px;\n    border:1px solid rgb(224, 224, 224);\n    padding: 10px;\n    overflow: hidden;\n    font-family: Helvetica, Arial, sans-serif;\n    line-height: 1.2;\n\n    * {\n      box-sizing: border-box;\n    }\n  }\n\n  &-block-header {\n    display: table;\n    width: 100%;\n    font-size: 11px;\n    border-bottom: 0;\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  &-block-header__tag {\n    font-weight: normal;\n    color: $TEMPLATE_COLOR[brand_color];\n    border-color: $TEMPLATE_COLOR[brand_color];\n    display: table-cell;\n    text-align: left;\n\n    a {\n      color: #ff3200;\n      text-transform: uppercase;\n      display: inline-block;\n      padding-bottom: 2px;\n      font-size: 11px;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__thumb {\n    float: none;\n    width: 100%;\n    margin-right: 0;\n    margin-top: 0;\n    display: block;\n    max-height: 195px;\n    overflow: hidden;\n    position: relative;\n\n    a {\n      text-decoration: none;\n    }\n\n    img {\n      height: auto;\n      display: inline;\n      width: 100%;\n    }\n  }\n\n  &-entry-box__body {\n    float: none;\n    width: 100%;\n    padding: 10px 0 0;\n    font-size: 14px;\n\n    h3 {\n      font-weight: normal;\n      font-size: 22px;\n      margin: 0 0 10px 0;\n      display: block;\n    }\n\n    a {\n      color: #333;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__byline{\n    margin: 0;\n    margin-top: 8px;\n    font-size: 11px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__blurb {\n    margin: 8px 0 0 0;\n    font-size: 13px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__native-logo {\n    margin-top: 10px;\n\n    img {\n    max-width: 100px;\n    max-height: 33px;\n    }\n  }\n\n}\n",js:"// This value intentionally left blank\n",click_through_url:"",preamble_text:"ADVERTISEMENT",thumbnail:"https://hymnal-prod.vox-cdn.com/thumbor/pPGmpy3dp-C1LuCX6oR6lwL06Zs=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/32835/Chinatown.jpg",
brand_color:"#80c0c0",logo:"https://hymnal-prod.vox-cdn.com/thumbor/GHHkLEYrC-YtgfVCpL1D57GZzZw=/fit-in/100x30/hymnal-prod.vox-cdn.com/uploads/asset/file/32742/Infiniti_Logo_200x120_JL__1___1_.png",title:"No Chop Suey Here \u2014 Learn Where to Eat in Chinatown from the People Who Know it Best ",byline:"Infiniti",description:"",pull_quote:"",preamble:"Presented By",eyebrow:"From Our Sponsor",tooltip:""}},designSetupFunction:function(variant){var all_variants={fa6794604717ab5fe6e5dafc90a373ef:"// This value intentionally left blank\n",a7b818b3a31791dec52ccc66d758fcb3:"// This value intentionally left blank\n","3601791236e690494cbd8dcf4992e6a9":"// This value intentionally left blank\n"};eval(all_variants[variant])}});ad.addMetricsInstrumentation(new Hymnal.MetricsInstrumentation({name:"Basic Tracking",adProperties:{clickThroughUrl:"http://www.eater.com/a/mofad-city-guides/chinatown-nyc"},setupFunction:function(n){n.addTrackerImage("https://ad.doubleclick.net/ddm/ad/N3340.529834VOXMEDIAINC/B10315514.137863917;sz=1x1;ord=%25%25CACHEBUSTER%25%25;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=?%22"),n.addTrackerImage("https://secure.insightexpressai.com/adServer/adServerESI.aspx?script=false&bannerID=1076755&rnd=%25%25CACHEBUSTER%25%25&redir=https://secure.insightexpressai.com/adserver/1pixel.gif")}})),ad.addLifecycleEventListener(new Hymnal.DefaultEvents),ad.render()})}(HymnalLib)}(jQuery)}function execHymnal(){Promise.all(adPromises.getBeforeRender()).then(executeHymnal)["catch"](function(n){"undefined"!=typeof console&&"function"==typeof console.log&&n!==ERROR_ESCAPE_STRING&&(console.log("Ad failed to render: "),console.error(n))})}var renderInIframe=!1,ERROR_ESCAPE_STRING="Silence Error on Rejected Promise to Please Winston",adPromises=function(){"use strict";function n(n){i.push(n)}function e(n){return i}function t(e){"undefined"!=typeof e&&(n(new Promise(function(n,e){return e()})),"undefined"!=typeof console&&"function"==typeof console.error&&console.error("An error prevented the rendering of Hymnal ads",e))}var i=[];return{resolveBeforeRender:n,getBeforeRender:e,stop:t}}(),adCallbacks=function(){"use strict";function n(n){l?n.call(r):o.push(n)}function e(n){l?n.call(r):a.push(n)}function t(n){if(l=!0,r=n,o.length)do{var e=o.shift();"function"==typeof e&&e.call(n||null)}while(o.length>0)}function i(n){if(r=n,a.length)do{var e=a.shift();"function"==typeof e&&e.call(n||null)}while(a.length>0)}var o=[],a=[],l=!1,r=null;return{afterRender:n,beforeRender:e,performAfterRender:t,performBeforeRender:i}}(),isInIframe=function(){"use strict";var n=!1;try{"object"==typeof window.frameElement&&-1!==window.frameElement.id.indexOf("google_ads_iframe")&&"object"==typeof window.frameElement.ownerDocument&&(n=!0)}catch(e){n=!1}return n},iframeSetup=function(){return new Promise(function(n,e){function t(n,e){function t(i){if(!e.data.disableAspectRatioHandler){var o=i||Hymnal.Events.get("windowWidth"),a=o>727?"desktop":"mobile",l=e.aspect_ratio[a];if(l||(l=n.width/n.height),0===n.clientWidth)return setTimeout(t,300);n.height=n.clientWidth/l}}return n||n.width||n.height?(n.width="100%",Hymnal.Events.whenLive(t),void adCallbacks.afterRender(function(){Hymnal.Events.onChange("windowWidth",t)})):!1}function i(){if(a)return!1;if("loading"===document.readyState)return document.addEventListener("readystatechange",i),!1;a=!0;for(var e=document.body.childNodes,t=window.frameElement.parentElement,o=e.length,l=o-1;l>=0;l--){var r=e[l];if("SCRIPT"===r.nodeName){for(var d=r.attributes,s=window.frameElement.ownerDocument.createElement("script"),g=0;g<d.length;g++)s.setAttribute(d[g].name,d[g].value);s.innerHTML=r.innerHTML,t.appendChild(s),document.body.removeChild(r)}else t.appendChild(r)}frameElement.style.display="none",n(!0)}function o(){isInIframe()?renderInIframe?(adCallbacks.afterRender(function(){var n=this;t(frameElement,n)}),n(!0)):(i(),e(ERROR_ESCAPE_STRING)):n(!1)}var a=!1;o()})}(),eventAPIToken="956bce3a-7ad9-40c2-9f12-58307330cdd8_"+Math.ceil(1e3*Math.random()),offplatformAMP=function(){"use strict";var n=function(){try{var n=!!parent.window.context&&!!parent.window.context.pageViewId;if(!n)return;Hymnal.Events.whenLive(e)}catch(t){}},e=function(){var n=parent.document.querySelector("iframe"),e=parent.window.context.initialIntersection.boundingClientRect;n.width=e.width,n.height=e.height};adCallbacks.beforeRender(n)}(),loadAdDependencies=function n(){function e(n){var e=new Promise(function(e,t){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.setAttribute("data-for","hymnal"),i[0].appendChild(o),o.onload=function(){e(o)},o.src=n});e["catch"](adPromises.stop),adPromises.resolveBeforeRender(e)}function t(){return!0}var n={_:{src:"https://hymnal-prod.vox-cdn.com/libraries/underscore-1.5.1.min.js",test:function(){return!!_.VERSION}},jQuery:{src:"https://hymnal-prod.vox-cdn.com/libraries/jquery-1.10.2.min.gz.js"}},i=document.getElementsByTagName("head");if(i.length>0)for(var o in n)n.hasOwnProperty(o)&&(n[o].test&&(t=n[o].test),"undefined"!=typeof window[o]&&window[o]&&t.call(this)||e(n[o].src))};loadAdDependencies(),adPromises.resolveBeforeRender(iframeSetup),execHymnal()}();