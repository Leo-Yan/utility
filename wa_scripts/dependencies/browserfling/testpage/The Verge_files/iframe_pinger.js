!function(){var a="undefined"!=typeof process&&process.versions&&!!process.versions.node,b=a?global:window;"undefined"==typeof b.Ooyala&&(b.Ooyala={}),Ooyala.Util={};var c=function(a,b){if(!a)throw b},d=function(a){c("string"==typeof a,"The namespace name must be a string.");var d=a.split(".");c(d.length>0,"The namespace '"+a+"' is not valid.");for(var e=b,f=0;f<d.length;f++){var g=d[f];if(c(g.length>0,"The namespace '"+a+"' is not valid."),e[g]){var h=d.slice(0,f).join(".");c("object"==typeof e[g],"Namespace error: the name '"+h+"' already exists and is not a namespace.")}else e[g]={};e=e[g]}};d("Ooyala.Util"),Ooyala.Util.createNamespace=d}(),Ooyala.Util.getOwnProperties=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},Ooyala.Util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&void 0==a[c]&&(a[c]=b[c])},Ooyala.Util.createNamespace("Ooyala.Util"),Ooyala.Util.bind=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,c.concat(Array.prototype.slice.call(arguments)))}},Ooyala.Util.createNamespace("Ooyala.Util.Http"),Ooyala.Util.Http._XMLHttpRequestFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],Ooyala.Util.Http._XMLHttpRequestFactory=null,Ooyala.Util.Http.createXMLHttpRequest=function(){if(null!=Ooyala.Util.Http._XMLHttpRequestFactory)return Ooyala.Util.Http._XMLHttpRequestFactory();for(var a=0;a<Ooyala.Util.Http._XMLHttpRequestFactories.length;a++)try{var b=Ooyala.Util.Http._XMLHttpRequestFactories[a],c=b();if(null!=c)return Ooyala.Util.Http._XMLHttpRequestFactory=b,c}catch(d){continue}Ooyala.Util.Http._XMLHttpRequestFactory=function(){throw"XMLHttpRequest not supported."},Ooyala.Util.Http._XMLHttpRequestFactory()},Ooyala.Util.createNamespace("Ooyala.Util.Enumerable"),Ooyala.Util.extend(Ooyala.Util.Enumerable,{_checkFunction:function(a){if("function"!=typeof a)throw new TypeError},foreach:function(a,b){this._checkFunction(b);for(var c=0;c<a.length;c++)b.call(void 0,a[c])},map:function(a,b){this._checkFunction(b);var c=[];return Ooyala.Util.Enumerable.foreach(a,function(a){c.push(b.call(void 0,a))}),c},select:function(a,b){this._checkFunction(b);var c=[];return Ooyala.Util.Enumerable.foreach(a,function(a){b.call(void 0,a)&&c.push(a)}),c},reject:function(a,b){return this.select(a,function(a){return!b.call(void 0,a)})}}),Ooyala.Util.CookieManager=function(a,b,c){this._cookieName=a,this._daysToLive=b,this._compareFn=c,this._keysValuesHash={},this._cookiesEnabled=window.navigator.cookieEnabled,Ooyala.Util.CookieManager.cookieNames.push(a)},Ooyala.Util.CookieManager.MAX_COOKIE_SIZE=2048,Ooyala.Util.CookieManager.cookieNames=[],Ooyala.Util.CookieManager.prototype={deDupe:function(){for(var a=this._readAllCookies(this._cookieName),b=0;b<a.length;b++)this._updateHashFromString(a[b]);this._writeCookie(this._cookieName,this._updateStringFromHash()),this._destroyCookies(this._cookieName)},get:function(a){if(!this._cookiesEnabled)return null;this._updateHashFromString(this._readCookie(this._cookieName));var b=this._keysValuesHash[a];return b?b:null},set:function(a,b){this._cookiesEnabled&&(this._keysValuesHash[a]=b.toString(),this._writeCookie(this._cookieName,this._updateStringFromHash()))},_compare:function(a,b){return this._compareFn(this._keysValuesHash[b],this._keysValuesHash[a])},_updateHashFromString:function(a){if(a)for(var b=a.split("&"),c=0;c<b.length;c++){var d=b[c],e=d.indexOf(":");if(-1!=e){var f=d.substring(0,e),g=d.substring(e+1),h=this._keysValuesHash[f];this._compareFn(h,g)<0&&(this._keysValuesHash[f]=g)}}},_updateStringFromHash:function(){for(var a=Ooyala.Util.getOwnProperties(this._keysValuesHash).sort(Ooyala.Util.bind(this._compare,this)),b="",c=this._cookieOverhead(this._cookieName),d=0;d<Ooyala.Util.CookieManager.cookieNames.length;d++){var e=Ooyala.Util.CookieManager.cookieNames[d];e!=this._cookieName&&(c+=this._cookieOverhead(e)+(this._readCookie(e)||"").length)}for(var d=0;d<a.length;d++){var f=a[d],g=this._keysValuesHash[f],h=c+b.length+f.length+g.length+(0==d?1:2);if(h>Ooyala.Util.CookieManager.MAX_COOKIE_SIZE)break;b+=(0==d?"":"&")+f+":"+g}return b},_writeCookie:function(a,b){document.cookie=a+"="+b+"; expires="+this._getExpiryDate()+"; path=/;"},_readCookie:function(a){var b=document.cookie;if(!b)return null;for(var c=a+"=",d=b.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c)){var g=f.substring(c.length,f.length);return g.length>0?g:null}}return null},_readAllCookies:function(a){var b=document.cookie,c=[];if(!b)return c;for(var d=a+"=",e=b.split(";"),f=0;f<e.length;f++){for(var g=e[f];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf(d)){var h=g.substring(d.length,g.length);h.length>0&&c.push(h)}}return c},_destroyCookies:function(a,b){if(a){b||(b=!1);for(var c=document.location.pathname;;){var d=c.lastIndexOf("/");if(-1===d)break;if(0===d&&1===c.length)break;document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path="+c+";",c=c.substring(0,d)}b&&(document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;")}},_cookieOverhead:function(a){return a.length+this._getExpiryDate().length+10+9},_getExpiryDate:function(){var a=(new Date).getTime();return new Date(a+24*this._daysToLive*60*60*1e3).toGMTString()}},Ooyala.Util.createNamespace("Ooyala.ThirdParty.SHA256"),function(){function a(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function b(a,b){return a>>>b|a<<32-b}function c(a,b){return a>>>b}function d(a,b,c){return a&b^~a&c}function e(a,b,c){return a&b^a&c^b&c}function f(a){return b(a,2)^b(a,13)^b(a,22)}function g(a){return b(a,6)^b(a,11)^b(a,25)}function h(a){return b(a,7)^b(a,18)^c(a,3)}function i(a){return b(a,17)^b(a,19)^c(a,10)}function j(b,c){var j,k,l,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);b[c>>5]|=128<<24-c%32,b[(c+64>>9<<4)+15]=c;for(var r=0;r<b.length;r+=16){j=w[0],k=w[1],l=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;64>s;s++)16>s?x[s]=b[s+r]:x[s]=a(a(a(i(x[s-2]),x[s-7]),h(x[s-15])),x[s-16]),t=a(a(a(a(q,g(n)),d(n,o,p)),v[s]),x[s]),u=a(f(j),e(j,k,l)),q=p,p=o,o=n,n=a(m,t),m=l,l=k,k=j,j=a(t,u);w[0]=a(j,w[0]),w[1]=a(k,w[1]),w[2]=a(l,w[2]),w[3]=a(m,w[3]),w[4]=a(n,w[4]),w[5]=a(o,w[5]),w[6]=a(p,w[6]),w[7]=a(q,w[7])}return w}function k(a){for(var b=Array(),c=(1<<o)-1,d=0;d<a.length*o;d+=o)b[d>>5]|=(a.charCodeAt(d/o)&c)<<24-d%32;return b}function l(a){for(var b="",c=(1<<o)-1,d=0;d<32*a.length;d+=o)b+=String.fromCharCode(a[d>>5]>>>24-d%32&c);return b}function m(a){for(var b=p?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(3-d%4)+4&15)+b.charAt(a[d>>2]>>8*(3-d%4)&15);return c}function n(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="",e=0;e<4*a.length;e+=3)for(var f=(a[e>>2]>>8*(3-e%4)&255)<<16|(a[e+1>>2]>>8*(3-(e+1)%4)&255)<<8|a[e+2>>2]>>8*(3-(e+2)%4)&255,g=0;4>g;g++)d+=8*e+6*g>32*a.length?b:c.charAt(f>>6*(3-g)&63);return d}var o=8,p=0;Ooyala.ThirdParty.SHA256.sha256ToHexString=function(a){return m(j(k(a),a.length*o))},Ooyala.ThirdParty.SHA256.sha256ToBase64String=function(a){return n(j(k(a),a.length*o))},Ooyala.ThirdParty.SHA256.sha256ToString=function(a){return l(j(k(a),a.length*o))}}(),Ooyala.Constants={LOGGING_SERVER_DOMAIN:("https:"==window.location.protocol?"https:":"http:")+"//l.ooyala.com",IFRAME_PINGER_PATH:"/analytics/iframe.html",SAS_URL:("https:"==window.location.protocol?"https:":"http:")+"//player.ooyala.com/sas/analytics",HIGH_PRIORITY_EVENT:0,LOW_PRIORITY_EVENT:1,HIGH_PRIORITY_EVENT_FLUSH_INTERVAL_MS:1e3,LOW_PRIORITY_EVENT_FLUSH_INTERVAL_MS:1e4,MIN_DURATION_FOR_STEP_BACKOFF:24e4},Ooyala.Util.createNamespace("Ooyala.Pinger"),Ooyala.Pinger.ALIVE_MESSAGE="&handshake!",Ooyala.Pinger.COOKIE_NAME="gi",Ooyala.Pinger.DAYS_TO_LIVE=7300,Ooyala.Pinger._numCompare=function(a,b){return-1},Ooyala.Pinger.RegisterMessageListener=function(a){window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a)},Ooyala.Pinger.RemoveMessageListener=function(a){window.removeEventListener?window.removeEventListener("message",a):window.detachEvent("onmessage",a)},Ooyala.Pinger._createAndSetGuid=function(){var a=(new Date).getTime(),b=window.navigator.userAgent,c=Math.random(),d=c>0?c.toString(16).split(".")[1]:"00000000",e=a+b+d,f=Ooyala.ThirdParty.SHA256.sha256ToBase64String(e),g=new Ooyala.Util.CookieManager(Ooyala.Pinger.COOKIE_NAME,Ooyala.Pinger.DAYS_TO_LIVE,Ooyala.Pinger._numCompare);return g.set("guid",f),f},Ooyala.Pinger.getOrCreateGuid=function(){var a=new Ooyala.Util.CookieManager(Ooyala.Pinger.COOKIE_NAME,Ooyala.Pinger.DAYS_TO_LIVE,Ooyala.Pinger._numCompare),b=a.get("guid");return null==b&&(b=Ooyala.Pinger._createAndSetGuid()),b},Ooyala.Pinger.Listener=function(a){this._reconstructor=new Ooyala.Pinger.ChunkReconstructor(a)},Ooyala.Pinger.Listener.POLL_INTERVAL=500,Ooyala.Pinger.Listener.prototype={_pollAndSend:function(){var a=window.location.hash;a.length>1&&(window.location.hash="",this._reconstructor.push(a.substring(1))),window.setTimeout(Ooyala.Util.bind(this._pollAndSend,this),Ooyala.Pinger.Listener.POLL_INTERVAL)},_messageHandler:function(a){this._reconstructor.push(a.data)},start:function(){if(window.postMessage){try{parent.postMessage(Ooyala.Pinger.ALIVE_MESSAGE+";"+Ooyala.Pinger.getOrCreateGuid(),"*")}catch(a){}Ooyala.Pinger.RegisterMessageListener(Ooyala.Util.bind(this._messageHandler,this))}else this._pollAndSend()}},Ooyala.Pinger.ChunkReconstructor=function(a){this._receiver=a,this._reset()},Ooyala.Pinger.ChunkReconstructor.prototype={_parseChunk:function(a){var b=a.split("~");if(3!=b.length)return null;var c={};if(c.data=b[0],c.id=parseInt(b[1]),c.count=parseInt(b[2]),c.id<=0||c.count<=0||c.id>c.count)throw"Bad chunk ID or total chunk count in ping chunk.";return c},_reset:function(){this._data="",this._chunksSeen=0,this._totalChunks=0},_handleChunk:function(a){if(0==this._totalChunks){if(a.id>1)return;return 1==a.count?void this._receiver.sendPing(a.data):(this._chunksSeen=1,this._totalChunks=a.count,void(this._data=a.data))}if(a.count==this._totalChunks&&a.id==this._chunksSeen+1){if(a.count==a.id){var b=this._data+a.data;return this._reset(),void this._receiver.sendPing(b)}return this._chunksSeen+=1,void(this._data+=a.data)}this._reset(),this._handleChunk(a)},push:function(a){var b=this._parseChunk(a);null!==b&&this._handleChunk(b)}},Ooyala.Pinger.ServerPinger=function(a){this._pingUrl=a},Ooyala.Pinger.MAX_XVERIFY_HEADER_LENGTH=7500,Ooyala.Pinger.ServerPinger.prototype={sendPing:function(a){if(a.length>Ooyala.Pinger.MAX_XVERIFY_HEADER_LENGTH)throw"Ping (length = "+a.length+") is too long.";var b=Ooyala.Util.Http.createXMLHttpRequest();b.open("POST",this._pingUrl,!0),b.setRequestHeader("X-Verify",a),b.send(null)}},function(){var a=new Ooyala.Pinger.Listener(new Ooyala.Pinger.ServerPinger(Ooyala.Constants.LOGGING_SERVER_DOMAIN+"/verify"));a.start()}();